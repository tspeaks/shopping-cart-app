/*------jquery.row-grid.js------*/
(function(b){b.fn.rowGrid=function(c){return this.each(function(){$this=b(this);if(c==="appended"){c=$this.data("grid-options");var e=$this.children("."+c.lastRowClass);var d=e.nextAll(c.itemSelector).add(e);a(this,c,d)}else{c=b.extend({},b.fn.rowGrid.defaults,c);$this.data("grid-options",c);a(this,c);if(c.resize){b(window).on("resize.rowGrid",{container:this},function(f){a(f.data.container,c)})}}})};b.fn.rowGrid.defaults={minMargin:null,maxMargin:null,resize:true,lastRowClass:"last-row",firstItemClass:null};function a(q,e,u){var z=0,c=[],u=jQuery.makeArray(u||q.querySelectorAll(e.itemSelector)),s=u.length;var p=q.clientWidth-parseFloat(b(q).css("padding-left"))-parseFloat(b(q).css("padding-right"));var f=[];var B,o,y;for(var x=0;x<s;++x){B=u[x].getElementsByTagName("img")[0];if(!B){u.splice(x,1);--x;--s;continue}if(!(o=parseInt(B.getAttribute("width")))){B.setAttribute("width",o=B.offsetWidth)}if(!(y=parseInt(B.getAttribute("height")))){B.setAttribute("height",y=B.offsetHeight)}f[x]={width:o,height:y}}s=u.length;for(var j=0;j<s;++j){if(u[j].classList){u[j].classList.remove(e.firstItemClass);u[j].classList.remove(e.lastRowClass)}else{u[j].className=u[j].className.replace(new RegExp("(^|\\b)"+e.firstItemClass+"|"+e.lastRowClass+"(\\b|$)","gi")," ")}z+=f[j].width;c.push(u[j]);if(j===s-1){for(var t=0;t<c.length;t++){if(t===0){c[t].className+=" "+e.lastRowClass}c[t].style.cssText="width: "+f[j+parseInt(t)-c.length+1].width+"px;height: "+f[j+parseInt(t)-c.length+1].height+"px;margin-right:"+((t<c.length-1)?e.minMargin+"px":0)}}if(z+e.maxMargin*(c.length-1)>p){var r=z+e.maxMargin*(c.length-1)-p;var m=c.length;var k=(e.maxMargin-e.minMargin)*(m-1);if(k<r){var d=e.minMargin;r-=(e.maxMargin-e.minMargin)*(m-1)}else{var d=e.maxMargin-r/(m-1);r=0}var g,l=0;for(var t=0;t<c.length;t++){g=c[t];var A=f[j+parseInt(t)-c.length+1].width;var n=A-(A/z)*r;var v=Math.round(f[j+parseInt(t)-c.length+1].height*(n/A));if(l+1-n%1>=0.5){l-=n%1;n=Math.floor(n)}else{l+=1-n%1;n=Math.ceil(n)}g.style.cssText="width: "+n+"px;height: "+v+"px;margin-right: "+((t<c.length-1)?d:0)+"px";if(t===0){g.className+=" "+e.firstItemClass}}c=[],z=0}}}})(jQuery);
/*------end------*/
/*------imagesloaded.js------*/
/*!
 * imagesLoaded PACKAGED v3.0.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
;
/*!
 * EventEmitter v4.2.4 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(){function c(){}var l=c.prototype;function h(w,x){var v=w.length;while(v--){if(w[v].listener===x){return v}}return -1}function j(v){return function w(){return this[v].apply(this,arguments)}}l.getListeners=function t(v){var y=this._getEvents();var w;var x;if(typeof v==="object"){w={};for(x in y){if(y.hasOwnProperty(x)&&v.test(x)){w[x]=y[x]}}}else{w=y[v]||(y[v]=[])}return w};l.flattenListeners=function r(x){var v=[];var w;for(w=0;w<x.length;w+=1){v.push(x[w].listener)}return v};l.getListenersAsObject=function e(v){var x=this.getListeners(v);var w;if(x instanceof Array){w={};w[v]=x}return w||x};l.addListener=function f(v,y){var x=this.getListenersAsObject(v);var z=typeof y==="object";var w;for(w in x){if(x.hasOwnProperty(w)&&h(x[w],y)===-1){x[w].push(z?y:{listener:y,once:false})}}return this};l.on=j("addListener");l.addOnceListener=function a(v,w){return this.addListener(v,{listener:w,once:true})};l.once=j("addOnceListener");l.defineEvent=function p(v){this.getListeners(v);return this};l.defineEvents=function q(v){for(var w=0;w<v.length;w+=1){this.defineEvent(v[w])}return this};l.removeListener=function b(v,z){var y=this.getListenersAsObject(v);var w;var x;for(x in y){if(y.hasOwnProperty(x)){w=h(y[x],z);if(w!==-1){y[x].splice(w,1)}}}return this};l.off=j("removeListener");l.addListeners=function m(v,w){return this.manipulateListeners(false,v,w)};l.removeListeners=function s(v,w){return this.manipulateListeners(true,v,w)};l.manipulateListeners=function g(w,x,z){var y;var A;var B=w?this.removeListener:this.addListener;var v=w?this.removeListeners:this.addListeners;if(typeof x==="object"&&!(x instanceof RegExp)){for(y in x){if(x.hasOwnProperty(y)&&(A=x[y])){if(typeof A==="function"){B.call(this,y,A)}else{v.call(this,y,A)}}}}else{y=z.length;while(y--){B.call(this,x,z[y])}}return this};l.removeEvent=function o(v){var y=typeof v;var x=this._getEvents();var w;if(y==="string"){delete x[v]}else{if(y==="object"){for(w in x){if(x.hasOwnProperty(w)&&v.test(w)){delete x[w]}}}else{delete this._events}}return this};l.removeAllListeners=j("removeEvent");l.emitEvent=function u(v,x){var A=this.getListenersAsObject(v);var B;var z;var y;var w;for(y in A){if(A.hasOwnProperty(y)){z=A[y].length;while(z--){B=A[y][z];if(B.once===true){this.removeListener(v,B.listener)}w=B.listener.apply(this,x||[]);if(w===this._getOnceReturnValue()){this.removeListener(v,B.listener)}}}}return this};l.trigger=j("emitEvent");l.emit=function k(v){var w=Array.prototype.slice.call(arguments,1);return this.emitEvent(v,w)};l.setOnceReturnValue=function i(v){this._onceReturnValue=v;return this};l._getOnceReturnValue=function n(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue}else{return true}};l._getEvents=function d(){return this._events||(this._events={})};if(typeof define==="function"&&define.amd){define("eventEmitter/EventEmitter",[],function(){return c})}else{if(typeof module==="object"&&module.exports){module.exports=c}else{this.EventEmitter=c}}}.call(this));
/*!
 * eventie v1.0.3
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */
(function(d){var a=document.documentElement;var e=function(){};if(a.addEventListener){e=function(h,g,f){h.addEventListener(g,f,false)}}else{if(a.attachEvent){e=function(h,g,f){h[g+f]=f.handleEvent?function(){var i=d.event;i.target=i.target||i.srcElement;f.handleEvent.call(f,i)}:function(){var i=d.event;i.target=i.target||i.srcElement;f.call(h,i)};h.attachEvent("on"+g,h[g+f])}}}var c=function(){};if(a.removeEventListener){c=function(h,g,f){h.removeEventListener(g,f,false)}}else{if(a.detachEvent){c=function(i,g,f){i.detachEvent("on"+g,i[g+f]);try{delete i[g+f]}catch(h){i[g+f]=undefined}}}}var b={bind:e,unbind:c};if(typeof define==="function"&&define.amd){define("eventie/eventie",b)}else{d.eventie=b}})(this);
/*!
 * imagesLoaded v3.0.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(f){var d=f.jQuery;var c=f.console;var a=typeof c!=="undefined";function g(k,j){for(var l in j){k[l]=j[l]}return k}var i=Object.prototype.toString;function e(j){return i.call(j)==="[object Array]"}function b(m){var l=[];if(e(m)){l=m}else{if(typeof m.length==="number"){for(var k=0,j=m.length;k<j;k++){l.push(m[k])}}else{l.push(m)}}return l}function h(m,k){function l(q,p,o){if(!(this instanceof l)){return new l(q,p)}if(typeof q==="string"){q=document.querySelectorAll(q)}this.elements=b(q);this.options=g({},this.options);if(typeof p==="function"){o=p}else{g(this.options,p)}if(o){this.on("always",o)}this.getImages();if(d){this.jqDeferred=new d.Deferred()}var r=this;setTimeout(function(){r.check()})}l.prototype=new m();l.prototype.options={};l.prototype.getImages=function(){this.images=[];for(var p=0,o=this.elements.length;p<o;p++){var q=this.elements[p];if(q.nodeName==="IMG"){this.addImage(q)}}};l.prototype.addImage=function(o){var p=new n(o);this.images.push(p)};l.prototype.check=function(){var t=this;var p=0;var r=this.images.length;this.hasAnyBroken=false;if(!r){this.complete();return}function q(v,u){if(t.options.debug&&a){c.log("confirm",v,u)}t.progress(v);p++;if(p===r){t.complete()}return true}for(var o=0;o<r;o++){var s=this.images[o];s.on("confirm",q);s.check()}};l.prototype.progress=function(o){this.hasAnyBroken=this.hasAnyBroken||!o.isLoaded;var p=this;setTimeout(function(){p.emit("progress",p,o);if(p.jqDeferred){p.jqDeferred.notify(p,o)}})};l.prototype.complete=function(){var o=this.hasAnyBroken?"fail":"done";this.isComplete=true;var p=this;setTimeout(function(){p.emit(o,p);p.emit("always",p);if(p.jqDeferred){var q=p.hasAnyBroken?"reject":"resolve";p.jqDeferred[q](p)}})};if(d){d.fn.imagesLoaded=function(p,q){var o=new l(this,p,q);return o.jqDeferred.promise(d(this))}}var j={};function n(o){this.img=o}n.prototype=new m();n.prototype.check=function(){var o=j[this.img.src];if(o){this.useCached(o);return}j[this.img.src]=this;if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}var p=this.proxyImage=new Image();k.bind(p,"load",this);k.bind(p,"error",this);p.src=this.img.src};n.prototype.useCached=function(o){if(o.isConfirmed){this.confirm(o.isLoaded,"cached was confirmed")}else{var p=this;o.on("confirm",function(q){p.confirm(q.isLoaded,"cache emitted confirmed");return true})}};n.prototype.confirm=function(o,p){this.isConfirmed=true;this.isLoaded=o;this.emit("confirm",this,p)};n.prototype.handleEvent=function(o){var p="on"+o.type;if(this[p]){this[p](o)}};n.prototype.onload=function(){this.confirm(true,"onload");this.unbindProxyEvents()};n.prototype.onerror=function(){this.confirm(false,"onerror");this.unbindProxyEvents()};n.prototype.unbindProxyEvents=function(){k.unbind(this.proxyImage,"load",this);k.unbind(this.proxyImage,"error",this)};return l}if(typeof define==="function"&&define.amd){define(["eventEmitter/EventEmitter","eventie/eventie"],h)}else{f.imagesLoaded=h(f.EventEmitter,f.eventie)}})(window);
/*------end------*/
/*------multimedia_helper.js------*/
/*!
 * jQuery-ajaxTransport-XDomainRequest - v1.0.2 - 2014-05-02
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2014 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{b(jQuery)}}(function(a){if(a.support.cors||!a.ajaxTransport||!window.XDomainRequest){return}var d=/^https?:\/\//i;var c=/^get|post$/i;var b=new RegExp("^"+location.protocol,"i");a.ajaxTransport("* text html xml json",function(h,g,f){if(!h.crossDomain||!h.async||!c.test(h.type)||!d.test(h.url)||!b.test(h.url)){return}var e=null;return{send:function(m,l){var k="";var j=(g.dataType||"").toLowerCase();e=new XDomainRequest();if(/^\d+$/.test(g.timeout)){e.timeout=g.timeout}e.ontimeout=function(){l(500,"timeout")};e.onload=function(){var n="Content-Length: "+e.responseText.length+"\r\nContent-Type: "+e.contentType;var i={code:200,message:"success"};var r={text:e.responseText};try{if(j==="html"||/text\/html/i.test(e.contentType)){r.html=e.responseText}else{if(j==="json"||(j!=="text"&&/\/json/i.test(e.contentType))){try{r.json=a.parseJSON(e.responseText)}catch(p){i.code=500;i.message="parseerror"}}else{if(j==="xml"||(j!=="text"&&/\/xml/i.test(e.contentType))){var q=new ActiveXObject("Microsoft.XMLDOM");q.async=false;try{q.loadXML(e.responseText)}catch(p){q=undefined}if(!q||!q.documentElement||q.getElementsByTagName("parsererror").length){i.code=500;i.message="parseerror";throw"Invalid XML: "+e.responseText}r.xml=q}}}}catch(o){throw o}finally{l(i.code,i.message,r,n)}};e.onprogress=function(){};e.onerror=function(){l(500,"error",{text:e.responseText})};if(g.data){k=(a.type(g.data)==="string")?g.data:a.param(g.data)}e.open(h.type,h.url);e.send(k)},abort:function(){if(e){e.abort()}}}})}));if(!Object.keys){Object.keys=(function(){var c=Object.prototype.hasOwnProperty,d=!({toString:null}).propertyIsEnumerable("toString"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=b.length;return function(g){if(typeof g!=="object"&&typeof g!=="function"||g===null){throw new TypeError("Object.keys called on non-object")}var e=[];for(var h in g){if(c.call(g,h)){e.push(h)}}if(d){for(var f=0;f<a;f++){if(c.call(g,b[f])){e.push(b[f])}}}return e}})()}if(typeof Array.prototype.forEach!="function"){Array.prototype.forEach=function(b){for(var a=0;a<this.length;a++){b.apply(this,[this[a],a,this])}}}Array.max=function(a){return Math.max.apply(Math,a)};var videoResponsiveBehaviorController=(function(){var a;var c={popup:false,fullView:false,videoPlayerPopup:false};var b=isTouchSupported?"touchend":"click";return{isValid:function(){var d=narrowWinWidth?narrowWinWidth:768;if(res_design===1&&viewport().width<=d){return true}return false},isfullViewOpen:function(){if(jQuery("#video-full-display").css("display")=="none"){return false}return true},isPopupOpen:function(){return c.popup},setActiveThumb:function(d){a=d},getActiveThumb:function(){if(a){return jQuery("#"+a).parents("li")}return null},setState:function(e,d){c[e]=d;if(e=="popup"&&d){c.fullView=false}if(e=="full"&&d){c.popup=false}},getState:function(){return c},render:function(){var d=this.getActiveThumb();if(!d){return}if(this.isValid()){if(c.fullView){closeDetailView();this.getActiveThumb().trigger(b)}}else{if(c.popup){this.closeWarningPopup();this.getActiveThumb().trigger(b)}}},decorateOptionsPopup:function(){var e=jQuery("li.video_sort_options.small a");var d,f,g;jQuery(e).off("click touchend");jQuery(e).on("touchstart",function(h){d=h.originalEvent.touches[0].clientY;f=d}).on("touchmove",function(h){f=h.originalEvent.touches[0].clientY}).on("click touchend",function(h){if(h.type==="touchend"){g=f-d;if(Math.abs(g)>20){return}}h.preventDefault();var i=jQuery(this).attr("data-val");videoOptionSelect(i)})},watchVideo:function(){this.createVideoPlayerPopup()},disableScrollHandler:function(f){var d=f?f:window.event;if($("#video_warning div.pop_container").css("display")==="block"){if(d.preventDefault){d.preventDefault()}d.returnValue=false;return false}},openVideoPlayerPopup:function(){jQuery("#video-player-popup .opener").trigger("click")},closeWarningPopup:function(){jQuery("#video_warning .closer").trigger("click")},createYouTubePlayer:function(d){if(this.isValid()){this.createVideoPlayerPopup(d)}else{jQuery("#full-video").prepend(d)}},createVideoWarningPopup:function(){var d=jQuery(['<div id="video_warning" class="holder">','<div class="opener"></div>','<div class="pop_container" style="display:none;"></div>',"</div>"].join(""));var e=jQuery("#full-video .privacy-details-top").clone(true,true);jQuery(e).addClass("popup retina");jQuery(e).find(".privacy-details-choice input#remember_choice_check").attr("id","remember_choice_check_small");jQuery(e).find('.privacy-details-choice label[for="remember_choice_check"]').attr("for","remember_choice_check_small");jQuery(e).append('<div class="cross_icon"><p class="closer"><a href="javascript:void(0);"></a></p></div>');jQuery(d).find(".pop_container").append(e);jQuery("body").append(d);jQuery("#video_warning").contentPopup({mode:"click",popup:".pop_container",btnOpen:".opener",btnClose:".closer",hideOnClickOutside:true});jQuery("body").on("aftercontentpopupshow","#video_warning",function(){addActiveClass(search_category);videoResponsiveBehaviorController.setState("popup",true)});jQuery("body").on("aftercontentpopuphide","#video_warning",function(){if(jQuery("#remember_choice_check_small").is(":checked")){jQuery("#remember_choice_check_small").prop("checked",false)}videoResponsiveBehaviorController.setState("popup",false)})},destroyVideoPlayerPopup:function(){if(jQuery("#video-player-popup").length){jQuery("#video-player-popup").remove()}addActiveClass(search_category)},createVideoPlayerPopup:function(f){var e=jQuery(['<div id="video-player-popup" class="holder">','<div class="opener"></div>','<div class="cross_icon closer" id="video-close"></div>','<div class="pop_container" style="display:none;">','<div class="popup retina">','<div id="video-player-holder"></div>',"</div>","</div>","</div>"].join(""));this.destroyVideoPlayerPopup();jQuery("body").append(e);jQuery("#video-player-popup").find("#video-player-holder").html("").append(f);var d=jQuery(this.getActiveThumb()).find(".video_info").not(".small").clone();var g=jQuery(d).find("label.truncate").not(".small");jQuery(g).addClass("title");jQuery(d).removeClass("video_info");jQuery(d).addClass("video-info");jQuery("#video-player-popup .pop_container").append(d);jQuery("#video-player-popup").contentPopup({mode:"click",popup:".pop_container",btnOpen:".opener",btnClose:".closer",hideOnCloseOutside:true});jQuery("body").on("aftercontentpopupshow","#video-player-popup",function(h){videoResponsiveBehaviorController.setState("videoPlayerPopup",true)});jQuery("body").on("aftercontentpopuphide","#video-player-popup",function(h){videoResponsiveBehaviorController.setState("videoPlayerPopup",false);videoResponsiveBehaviorController.destroyVideoPlayerPopup()});this.openVideoPlayerPopup()}}})();var responseData=new Array();var resultLoaderStat=new Array();var searchFormId="search_form";var picsThumbImgGap=9;var videoThumbImgGap=33;var search_category="";var triggerNextAjaxCall=true;var borderThickness=2;var substitute_for_https=1;var isScrollBar=false;var res_design=0;var narrowWinWidth=768;var rowGridPics=undefined;var minImageLoadBeforeLayout=10;var imageQueueLength=0;var BrowserDetect=detect.parse(navigator.userAgent);BrowserDetect.browser=BrowserDetect.browser.family;var browser=BrowserDetect.browser;initializeVariables();if(search_category==="pics"&&MY_BROWSER==="Mobile Safari"&&MY_BROWSER_VERSION==="9"){document.querySelector("meta[name=viewport]").setAttribute("content","initial-scale=1.0001, minimum-scale=1.0001, maximum-scale=1.0001, user-scalable=no")}jQuery(document).ready(function(){setImageContainerHeight();jQuery("#pics-full-display").on("click","#full-image-high-res",function(d){d.stopPropagation();if(resultLoaderStat[search_category+"-metadata"]["always_anonymous_image"]&&(resultLoaderStat[search_category+"-metadata"]["always_anonymous_image"]==1)){if(isHighResImageLoaded()){window.open($("div.media_inner_full").find("#full-image-view").attr("href"),"_blank")}}else{window.open(jQuery(this).attr("src"),"_blank")}});jQuery("#"+search_category+"-full-display").on("click",function(d){var f=$(d.target).attr("id");if(res_design===1&&$("#pics-full-display").hasClass("narrow-detail-view")){if(f!=="narrow-detail-dropdown"){$("label.image-properties").hide()}return}if(search_category=="video"){destroyExistingPlayer()}closeDetailView();addActiveClass(search_category);removeHoverClasses(jQuery("#"+search_category+"-lemmon-slider-ul li"))});jQuery("#full-image-page, #full-image-view, #full-video, #full-image-page-anonymous, a.view_npi").click(function(f){f.stopPropagation();var d="innerWidth" in window?window.innerWidth:$(window).width();if(res_design===1&&search_category==="pics"&&d<=narrowWinWidth){$("label.image-properties").hide()}});if(res_design===1&&!("onorientationchange" in window)){jQuery(window).resize(function(){gridMultimediaResizer(search_category)})}else{if(res_design!==1){jQuery(window).resize(function(){gridMultimediaResizer(search_category)})}}jQuery("#"+search_category+"-lemmon-slider-wrapper").on("click",".more_btn",function(){jQuery(".more_icon").remove();removeAndAddLoaderContent(search_category);triggerNextAjaxCall=true;fetchResults(search_category)});var a="ontouchstart" in window?"touchstart":"click";if(res_design===1&&search_category==="pics"){jQuery("#pics-full-display").on(a,"#narrow-detail-dropdown",function(d){$("label.image-properties").toggle()});if($("html").hasClass("is-ios-device")||$("html").hasClass("is-android-device")){jQuery("#pics-full-display").on(a,"#image-close",function(d){closeDetailView(search_category);addActiveClass(search_category);return false})}else{$(document).on("click touchstart",".closer",function(d){d.stopPropagation();d.preventDefault();if(d.handled!==true){closeDetailView(search_category);addActiveClass(search_category);d.handled=true}else{return false}})}}videoResponsiveBehaviorController.createVideoWarningPopup();videoResponsiveBehaviorController.decorateOptionsPopup();var c=[];if(typeof config_data!=="undefined"){c[c.length]=config_data.hnc+"/graphics/theme/black/retina_more_image_loader_theme_black_bg.gif"}if(res_design===1&&typeof prefetchImages==="function"){for(var b=0;b<c.length;b++){prefetchImages(c[b])}}jQuery("#full-image-view").on("click",function(d){d.preventDefault();if(isHighResImageLoaded()){window.open($("div.media_inner_full").find("#full-image-view").attr("href"),"_blank")}});jQuery("#full-image-high-res").on("hdImageFail hdImageSuccess",function(e){if(resultLoaderStat[search_category+"-metadata"]["always_anonymous_image"]&&(resultLoaderStat[search_category+"-metadata"]["always_anonymous_image"]==1)){var d="innerWidth" in window?window.innerWidth:$(window).width();if(isHighResImageLoaded()&&d>narrowWinWidth){$("div.media_inner_full").find("#full-image-high-res").css("cursor","pointer")}else{$("div.media_inner_full").find("#full-image-high-res").css("cursor","default")}}});if(res_design===1&&search_category==="pics"&&!("ontouchstart" in window)){$("#wrapper").on("click","#closeAreaId",function(){setTimeout(function(){$(window).trigger("resize.rowGrid")})})}});jQuery(window).resize(function(){setImageContainerHeight()});if(res_design!==1){jQuery(window).resize(function(){adjustMultimediaTitle(search_category)})}if(res_design==1){jQuery(window).resize(function(){videoResponsiveBehaviorController.decorateOptionsPopup();videoResponsiveBehaviorController.render()})}if(res_design===1&&("onorientationchange" in window)){window.addEventListener("orientationchange",function(){setTimeout(function(){gridMultimediaResizer(search_category);if(search_category==="pics"&&$("#"+search_category+"-full-display").is(":visible")){scrollFullImageVideoIntoView(search_category)}},100)})}if(res_design===1&&!("ontouchstart" in window)){jQuery(window).resize(function(){setImageContainerHeight();var a=("innerWidth" in window)?window.innerWidth:$(window).width();if(a>narrowWinWidth){adjustMultimediaTitle(search_category)}})}jQuery(window).scroll(multimediaOnScrollHandler);function multimediaOnScrollHandler(){if(!triggerNextAjaxCall){return 0}jQuery(window).unbind("scroll",multimediaOnScrollHandler);fetchResults(search_category);jQuery(window).unbind("scroll",multimediaOnScrollHandler).bind("scroll",multimediaOnScrollHandler)}function isScrolledIntoView(c){if(!c.length){return}var e=jQuery(window).scrollTop();var f=("innerHeight" in window)?window.innerHeight:jQuery(window).height();var d=e+f;var a=jQuery(c).offset().top;var b=a+jQuery(c).innerHeight();return((b<=d)&&(a>=e))}function initializeVariables(){search_category=jQuery("#"+searchFormId).find("input[name='cat']").val();borderThickness=jQuery("#"+search_category+"-li-container-0").outerWidth()-jQuery("#"+search_category+"-li-container-0").width();responseData[search_category]={};resultLoaderStat[search_category+"-loading"]=0;resultLoaderStat[search_category+"-broken-result-ids"]={};resultLoaderStat[search_category+"-loaded-result-ids"]={};resultLoaderStat[search_category+"-more-result-req-count"]=0;resultLoaderStat[search_category+"-fetched-result-count"]=0;resultLoaderStat[search_category+"-loaded-result-count"]={};resultLoaderStat[search_category+"-loaded-result-count"][resultLoaderStat[search_category+"-more-result-req-count"]]=0;resultLoaderStat[search_category+"-minimum_result_count"]=30;jQuery("#"+search_category+"-lemmon-slider-ul").css("display","block");if(typeof config_data!=="undefined"){res_design=config_data.rsd}else{res_design=0}if(res_design){res_design=parseInt(res_design,10)}if(typeof initData!=="undefined"){populateResults(initData,1)}}function fetchResults(b,a){if(!(jQuery("#load_more").length&&(isScrolledIntoView(jQuery("#load_more"))||a==="detail_view")&&triggerNextAjaxCall&&resultLoaderStat[b+"-more-result"])){return}if(resultLoaderStat[b+"-metadata"].p===1){return}triggerNextAjaxCall=false;var d=searchFormId;submitUrl=jQuery("#"+d).attr("action");var c="";params="";metadataArray=resultLoaderStat[b+"-metadata"];if(metadataArray!=undefined){jQuery("#"+d+" input").each(function(f){param_key=jQuery(this).attr("name");if(param_key!=""&&metadataArray[param_key]!=undefined){params+=param_key+"="+metadataArray[param_key]+"&";delete metadataArray[param_key]}else{params+=param_key+"="+jQuery(this).val()+"&"}});jQuery.each(metadataArray,function(f,g){params+=f+"="+g+"&"})}if(b==="pics"){params+="&rcount="+resultLoaderStat[b+"-more-result-req-count"]}params=cleanParams(params,["avt","play_text","view_text","undefined","nj","more_text","cat"]);params+="&nj=0";params+="&cat="+b;var e=getCookieVal();if(e){params+="&accprfh="+e.split(/=/)[1]}if(resultLoaderStat[b+"-metadata"].server!=undefined){submitUrl=resultLoaderStat[b+"-metadata"].server}else{submitUrl=submitUrl.replace(/^https?:\/\/[^/]+/i,"")}jQuery.ajax({url:submitUrl,type:"POST",data:params,success:function(g,f,h){resultLoaderStat[search_category+"-more-result-req-count"]++;resultLoaderStat[b+"-loaded-result-count"][resultLoaderStat[b+"-more-result-req-count"]]=0;var i=processResponseBasedOnContentType(g,h);if(i==1){if((search_category=="video")&&(MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){adjustMediaQueries()}}else{processFailedAjaxCall(search_category)}},error:function(){processFailedAjaxCall(search_category)}})}function processFailedAjaxCall(a){triggerNextAjaxCall=true;failedReqErrorHandler(a)}function processResponseBasedOnContentType(a,c){var b=getResponseType(c);if(b.match(/javascript/i)){processJSResponse(a)}else{if(b.match(/json/i)){processJsonResponse(a)}else{return 0}}return 1}function getResponseType(a){return a.getResponseHeader("content-type")||""}function processJsonResponse(a){return populateResults(a,1)}function processJSResponse(b){var a=document.createElement("script");a.append(b);document.head.appendChild(a);return 1}function failedReqErrorHandler(c){var e=resultLoaderStat[c+"-loading"];var a="results_err_msg";if("ontouchstart" in window){a="results_err_msg_mobile"}if(e>0){if(jQuery("#"+c+"-lemmon-slider-wrapper ."+a).length){jQuery("#"+c+"-lemmon-slider-wrapper ."+a).remove()}if(res_design===1&&("ontouchstart" in window)&&$("#pics-full-display").is(":visible")){if(jQuery("#"+c+"-full-display div.results_err_msg_mobile").length){jQuery("#"+c+"-full-display div.results_err_msg_mobile").remove()}}}var d=jQuery("#"+c+"-lemmon-slider-wrapper");var b=jQuery("."+a).clone();d.append(b);if(e>0){if(jQuery("#"+c+"-lemmon-slider-wrapper #load_more").length){jQuery("#"+c+"-lemmon-slider-wrapper #load_more").remove()}jQuery("#"+c+"-lemmon-slider-wrapper").find("."+a+" ul li a").attr("onclick","fetchAfterFailedRequest()");jQuery("#"+c+"-lemmon-slider-wrapper").find("."+a).css("display","block");jQuery("#"+c+"-lemmon-slider-wrapper").find(".loading_icon").css("display","none")}if(res_design===1&&("ontouchstart" in window)&&$("#pics-full-display").is(":visible")){d=jQuery("#"+c+"-full-display div.loading_icon_detail");var b=jQuery("div.results_err_msg_mobile").clone();d.after(b);if(e>0){jQuery("#"+c+"-full-display").find("div.results_err_msg_mobile ul li a").attr("onclick","fetchAfterFailedRequest('detail_view')");jQuery("#"+c+"-full-display").find("div.results_err_msg_mobile").css("display","block");jQuery("#"+c+"-full-display").find("div.loading_icon_detail").css("display","none")}}}function fetchAfterFailedRequest(b){var a="results_err_msg";if("ontouchstart" in window){a="results_err_msg_mobile"}if(jQuery("#"+search_category+"-lemmon-slider-wrapper ."+a).length){jQuery("#"+search_category+"-lemmon-slider-wrapper ."+a).remove();if(jQuery("#"+search_category+"-lemmon-slider-wrapper .loading_icon").css("display")=="none"){jQuery("#"+search_category+"-lemmon-slider-wrapper .loading_icon").css("display","block")}}if(res_design===1&&b&&b==="detail_view"){if(jQuery("#"+search_category+"-full-display div.results_err_msg_mobile").length){jQuery("#"+search_category+"-full-display div.results_err_msg_mobile").remove();if(jQuery("#"+search_category+"-full-display div.loading_icon_detail").css("display")=="none"){jQuery("#"+search_category+"-full-display div.loading_icon_detail").css("display","block")}}}removeAndAddLoaderContent(search_category);if(b&&b==="detail_view"){fetchResults(search_category,b)}else{fetchResults(search_category)}}function populateResults(d,j){var f=jQuery('input[name="ysc"]').val();var h=jQuery('input[name="ycc"]').val();var e="";var i="";var g="";if(d.metadata!=undefined){metadata=d.metadata;g=metadata.cat;unwanted_keys=["play_text","view_text","more_text"];jQuery.each(unwanted_keys,function(k,l){delete metadata[k]});resultLoaderStat[g+"-metadata"]=d.metadata;i=metadata.npt;e=metadata.prc;delete d.metadata}if(Object.keys(d).length==0){removeAdditionalAppendedContent(g);return}var c=resultLoaderStat[g+"-more-result-req-count"];responseData[g][c]={};responseData[g][c]=jQuery.extend(true,responseData[g][c],d);resultLoaderStat[g+"-fetched-result-count"]=Object.keys(responseData[g][c]).length;resultLoaderStat[g+"-total-fetched-result-count"]=Array.max(Object.keys(responseData[g][c]));resultLoaderStat[g+"-more-result"]=false;if(g=="video"){if(i!==""&&i!=="undefined"){resultLoaderStat[g+"-more-result"]=true}}else{var b=resultLoaderStat[g+"-total-fetched-result-count"];if((parseInt(b)+1)<parseInt(e)){resultLoaderStat[g+"-more-result"]=true}}if(resultLoaderStat[g+"-metadata"].NORESULTMSG){postThumbsDisplay();return}if(g==="video"){resultLoaderStat[g+"-minimum_result_count"]=Object.keys(d).length}populateHtml(resultLoaderStat[g+"-metadata"],d);checkForImageLoading(g,f,resultLoaderStat[g+"-metadata"].more_text);removeAndAddLoaderContent(g);if(resultLoaderStat[g+"-more-result"]==false){if(jQuery(".loading_icon").length){jQuery(".loading_icon").remove()}if(jQuery(".loading_icon").length==0){var a=jQuery("<div class='loading_icon'></div>");jQuery("#"+g+"-lemmon-slider-wrapper").append(a)}jQuery(".loading_icon").css("visibility","hidden");return}if(jQuery("#pagenavigation").length>0){jQuery("#pagenavigation").css("display","block")}}function getScaledImageWidth(d,f){var e=150;var b=d;var a=f;var c=b-((a-e)/a)*b;c=parseInt(c,10);return(c<=480)?c:480}function populateHtml(j,c,e){var g=j.play_text;var b=j.view_text;var h=j.more_text;var k=j.cmd;var a=j.cat;var f=0;var i=searchFormId;cont_id=resultLoaderStat[a+"-loading"];var d="";if(a=="pics"){jQuery.each(Object.keys(c),function(m,l){var n=c[l];d+="<li id='"+a+"-li-container-"+cont_id+"' class='item'><div class='multimedia_thumb'><img id='"+a+"-image-"+resultLoaderStat[a+"-more-result-req-count"]+"-"+l+"' src='"+n.THUMBURL+"' data-src='"+n.THUMBURLDATA;if(res_design===1){d+="' width='"+getScaledImageWidth(n.THUMBWIDTH,n.THUMBHEIGHT)+"' height='"+150+"'>"}else{d+="'>"}d+="<div class='transparent-hover'><span class='plus-icon'></span> <label class='size-txt'><span>"+c[l].WIDTH+"</span><span> &times; </span><span>"+c[l].HEIGHT+"</span></label></div></div></li>";cont_id++})}else{jQuery.each(Object.keys(c),function(m,l){var n=c[l];d+="<li id='"+a+"-li-container-"+cont_id+"' style='width:176px'>";if(!resultLoaderStat[a+"-metadata"]["NORESULTMSG"]){d+="<div class='play_time w_arrow'><span>"+n.VIDEODURATION+"</span></div>";if(res_design===1){d+="<div class='video_info small'><label class='truncate'><b>"+n.TITLE+"</b></label><label>"+n.VIEWCOUNT+"&nbsp;"+b+"</label></div>"}}d+="<div class='video_container video_container_dim'>";d+="<div class='multimedia_thumb'><img id='"+a+"-image-"+resultLoaderStat[a+"-more-result-req-count"]+"-"+l+"' src='"+n.VIDEOTHUMB+"' data-src='"+n.VIDEOTHUMBDATA+"'></div>";if(!resultLoaderStat[a+"-metadata"]["NORESULTMSG"]){d+="<div class='roll_over' style='visibility: hidden;'><div class='play_icon'></div><span><b>"+g+"</b></span></div>";d+="<div class='play_time w_arrow small'><span>"+n.VIDEODURATION+"</span></div>";d+="</div><div class='video_info'><label class='truncate'><b>"+n.TITLE+"</b></label><label class='video-length' style='display:none;'>"+n.VIDEODURATION+"</label><label>"+n.VIEWCOUNT+"&nbsp;"+b+"</label><label class='published truncate small'>"+n.PUBDATE+"</label>"}d+="</div></li>";cont_id++})}avt_c(resultLoaderStat[a+"-metadata"]["avt"]);if(resultLoaderStat[a+"-metadata"]["NORESULTMSG"]!=true){jQuery("#"+a+"-lemmon-slider-ul").append(d);removeAndAddLoaderContent(a)}}function removeAndAddLoaderContent(a){if(resultLoaderStat[a+"-metadata"].p===1){return}if(jQuery("#load_more").length){jQuery("#load_more").remove()}if(jQuery("div.loading_icon").length){jQuery("div.loading_icon").remove()}var b=jQuery("<div id='load_more'></div>");jQuery("#"+a+"-lemmon-slider-ul").append(b);var c=jQuery("<div class='loading_icon'><ul><li class='init_result_loader'><span></span></li></ul></div>");jQuery("#"+a+"-lemmon-slider-wrapper").append(c)}var execute_postImgLoadingHandler=true;function postImgLoadingHandler(e,d,b,a){jQuery(window).trigger("resize.rowGrid");if(!execute_postImgLoadingHandler){return}gridMultimediaResizer(e);execute_postImgLoadingHandler=false;var a=a||false;if(a){var g=resultLoaderStat[e+"-more-result-req-count"];jQuery("img[id^='"+e+"-image-"+resultLoaderStat[e+"-more-result-req-count"]+"']").each(function(i,j){imgId=j.id;if(resultLoaderStat[e+"-broken-result-ids"][g][imgId]==undefined&&resultLoaderStat[e+"-loaded-result-ids"][g][imgId]==undefined){resultLoaderStat[e+"-broken-result-ids"][g].push(imgId)}})}var h=resultLoaderStat[e+"-minimum_result_count"];var c=resultLoaderStat[e+"-loaded-result-count"][resultLoaderStat[e+"-more-result-req-count"]];if(h>c&&e=="pics"){if(c==0&&resultLoaderStat[e+"-metadata"]["mmp"]!=1&&substitute_for_https==1){substitute_for_https==0;substitute_for_https_url(e,d,b)}else{load_broken_thumbs(e,d,b)}}else{if(e=="pics"){removeContainers(resultLoaderStat[e+"-loading"],e);if(resultLoaderStat[e+"-more-result"]){removeAndAddLoaderContent(e)}}loadOriginalVideoThumbnails(resultLoaderStat[e+"-more-result-req-count"]);var f=resultLoaderStat[e+"-more-result-req-count"];if(resultLoaderStat[e+"-metadata"].p=="0"){if((f>0)&&(f%4==0)){getAndAppendMoreButtonHtml(e,b)}else{triggerNextAjaxCall=true;fetchResults(e)}}}postThumbsDisplay(d);if(res_design===1&&search_category==="pics"){populateResponsiveDetailContainers()}}function checkForImageLoading(d,c,b){resultLoaderStat[d+"-broken-result-ids"][resultLoaderStat[d+"-more-result-req-count"]]=new Array();resultLoaderStat[d+"-loaded-result-ids"][resultLoaderStat[d+"-more-result-req-count"]]=new Array();var f=new Array();jQuery("img[id^='"+d+"-image-"+resultLoaderStat[d+"-more-result-req-count"]+"']").each(function(g,h){f.push(h)});execute_postImgLoadingHandler=true;var e=new imagesLoaded(f,function(){postImgLoadingHandler(d,c,b)});var a=false;if(d==="pics"&&resultLoaderStat[d+"-metadata"]["mmp"]==1){setTimeout(function(){var g=resultLoaderStat[d+"-loaded-result-count"][resultLoaderStat[d+"-more-result-req-count"]];if(g==0&&d=="pics"){a=true;postImgLoadingHandler(d,c,b,a)}},15000)}e.on("progress",function(g,j){if(!a){var h=j.img.id;id=h.match(/\d+/)[0];if(j.isLoaded){if(resultLoaderStat[d+"-loaded-result-ids"][resultLoaderStat[d+"-more-result-req-count"]].indexOf(h)==-1){var i=jQuery("#"+h).parents("li").attr("id").toString();resultLoaderStat[d+"-loaded-result-count"][resultLoaderStat[d+"-more-result-req-count"]]++;resultLoaderStat[d+"-loaded-result-ids"][resultLoaderStat[d+"-more-result-req-count"]].push(h);setImageDimensions(h,"thumb");displayImage(h,i,d)}}else{resultLoaderStat[d+"-broken-result-ids"][resultLoaderStat[d+"-more-result-req-count"]].push(h)}}})}function loadOriginalVideoThumbnails(a){jQuery.each(responseData[search_category][a],function(b,c){originalURL=c.VIDEOTHUMBDATA;jQuery("#video-li-container-"+b+" img").attr("src",originalURL)})}function setImageDimensions(c,e,f){if(search_category==="pics"&&typeof f==="undefined"&&e!=="thumb"){if(res_design===1){return}else{f=$("div.media_inner_full")}}if(search_category==="video"&&typeof f==="undefined"&&e!=="thumb"){f=$("div.media_inner_full")}elements=c.split("-");category=elements[0];id=elements[3];morecounter=elements[2];if(category==="video"){$("#"+c).attr("owidth","176")}else{if(e==="thumb"){var b=responseData[category][morecounter][id].THUMBWIDTH;var a=responseData[category][morecounter][id].THUMBHEIGHT;if((b/a)>2.4){jQuery("#"+c).width("360px");b=360}jQuery("#"+c).attr("owidth",jQuery("#"+c).width())}else{var b=responseData[category][morecounter][id].WIDTH;var a=responseData[category][morecounter][id].HEIGHT;f.find("#full-image-low-res").height("268px");f.find("#full-image-high-res").height("268px");if((b/a)>2.4){f.find("#full-image-low-res").width("644px");f.find("#full-image-high-res").width("644px");if(res_design===1){f.find("img.full-image").css("height","auto")}}else{var d=(a/268);b=parseInt(b/d);b=b-5;f.find("#full-image-low-res").css("width",b);f.find("#full-image-high-res").css("width",b)}}}}function initializeThumbGab(b){if(b=="pics"){var a=Math.round(jQuery("#"+b+"-li-container-0").offset().left);if(a>0){picsThumbImgGap=a}}else{var a=Math.round(jQuery("#"+b+"-li-container-0").offset().left);if(a>0){videoThumbImgGap=a}}}function displayImage(b,f,d){var a;if(!jQuery("#"+f).hasClass(d+"-more-result")&&!jQuery("#"+f).hasClass(d+"-result-loader")){if(d==="pics"){var e=jQuery("#"+d+"-li-container-"+resultLoaderStat[d+"-loading"]).html();jQuery("#"+d+"-li-container-"+resultLoaderStat[d+"-loading"]).html(jQuery("#"+f).html());jQuery("#"+f).html(e)}gridMultimediaResizer(d,resultLoaderStat[d+"-firstImageCnt"],resultLoaderStat[d+"-loading"],true);resultLoaderStat[d+"-loading"]++;if(resultLoaderStat[d+"-loading"]==1){initializeThumbGab(d)}jQuery("#"+f).css("visibility","visible");jQuery("#"+b).css("visibility","visible");a=parseInt(resultLoaderStat[d+"-loading"])-1;checkForDeviceAndExecute(jQuery("#"+d+"-li-container-"+a));imgHover(b,d);if(!rowGridPics){var c={minMargin:8,maxMargin:8,itemSelector:".item",resize:true,lastRowClass:"last-row",firstItemClass:"first-item"};if(res_design===1&&d==="pics"){rowGridPics=$("#pics-lemmon-slider-ul").rowGrid(c)}}if(res_design===1&&d==="pics"&&(!("ontouchstart" in window)||("ontouchstart" in window&&!$("#pics-full-display").is(":visible")))){if(imageQueueLength>minImageLoadBeforeLayout){$(window).trigger("resize.rowGrid");imageQueueLength=0}}imageQueueLength++}else{resultLoaderStat[d+"-loading"]++}}function load_broken_thumbs(c,b,a){resultLoaderStat[c+"-more_result_count"]=resultLoaderStat[c+"-minimum_result_count"]-resultLoaderStat[c+"-loaded-result-count"][resultLoaderStat[c+"-more-result-req-count"]];resultLoaderStat[c+"-url-replace-count"]=0;while(resultLoaderStat[c+"-url-replace-count"]!=resultLoaderStat[c+"-more_result_count"]&&resultLoaderStat[c+"-broken-result-ids"][resultLoaderStat[c+"-more-result-req-count"]].length>0){broken_result_id=resultLoaderStat[c+"-broken-result-ids"][resultLoaderStat[c+"-more-result-req-count"]].splice(0,1);var d=jQuery("#"+broken_result_id).attr("data-src");jQuery("#"+broken_result_id).attr("isbroken","true");jQuery("#"+broken_result_id).attr("src",d);resultLoaderStat[c+"-url-replace-count"]++}jQuery("img[isbroken=true]").imagesLoaded().progress(function(e,h){var f=h.img.id.toString();var g=jQuery("#"+f).closest("li").attr("id");if(h.isLoaded){jQuery("#"+f).attr("isbroken","false");resultLoaderStat[c+"-loaded-result-count"][resultLoaderStat[c+"-more-result-req-count"]]++;setImageDimensions(f,"thumb");displayImage(f,g,c)}else{if(c==="video"){jQuery("#"+f).css("width","176");jQuery("#"+f).removeAttr("isbroken");jQuery("#"+f).attr("owidth","176");jQuery("#"+g).css("visibility","visible");resultLoaderStat[c+"-loading"]++;gridMultimediaResizer(c,resultLoaderStat[c+"-firstImageCnt"],g.match(/\d+/)[0],true)}}}).always(function(){var g=resultLoaderStat[c+"-loaded-result-count"][resultLoaderStat[c+"-more-result-req-count"]];var e=resultLoaderStat[c+"-minimum_result_count"];if(g>=e||resultLoaderStat[c+"-broken-result-ids"][resultLoaderStat[c+"-more-result-req-count"]].length==0){var f=resultLoaderStat[c+"-more-result-req-count"];if(resultLoaderStat[c+"-metadata"].p=="0"){if((f>0)&&(f%4==0)){getAndAppendMoreButtonHtml(c,a)}else{triggerNextAjaxCall=true;fetchResults(c)}}removeContainers(resultLoaderStat[c+"-loading"],c);if(g<1){if(c==="pics"){triggerNextAjaxCall=true;failedReqErrorHandler(c)}}}else{load_broken_thumbs(c,b,a)}postThumbsDisplay(b);if(res_design===1&&search_category==="pics"){populateResponsiveDetailContainers()}gridMultimediaResizer(c)})}function removeAdditionalAppendedContent(a){if(jQuery("#load_more").length){jQuery("#load_more").remove()}if(jQuery(".loading_icon").length){jQuery(".loading_icon").remove()}if(jQuery(".more_icon").length){jQuery(".more_icon").remove()}jQuery("#"+a+"-lemmon-slider-ul").css("padding-bottom","110px")}function getAndAppendMoreButtonHtml(c,b){if(jQuery("#load_more").length){jQuery("#load_more").remove()}if(jQuery(".loading_icon").length){jQuery(".loading_icon").remove()}if(jQuery(".more_icon").length){jQuery(".more_icon").remove()}var a=jQuery("<div class='more_icon'><ul><li><div class='more_btn'><span>"+b+"</span></div></li></ul></div>");jQuery("#"+c+"-lemmon-slider-wrapper").append(a)}function thumbImgHover(a){}function imgHover(b,d){var a="innerWidth" in window?window.innerWidth:$(window).width();if("ontouchstart" in window&&a<=narrowWinWidth){return}d=(d)?d:search_category;var c="";if(res_design===1){c=(d==="pics")?"div":"li"}else{c="li"}jQuery("#"+b).closest(c).hover(function(){hoverEffectSimulation(jQuery(this))},function(){removeHoverClasses(jQuery(this).closest(c))});jQuery("#"+b).closest(c).mousemove(function(){removeHoverClasses($("#"+d+"-lemmon-slider-ul "+c));hoverEffectSimulation($(this));$("#"+d+"-li-container-0").data("count",0)})}function postThumbsDisplay(a){jQuery("#"+search_category+"-lemmon-slider-id").trigger("beginPostThumbDisplay");if(!(search_category==="pics"&&resultLoaderStat[search_category+"-metadata"].NORESULTMSG)){checkForDeviceAndExecute()}jQuery("#image-close, #video-close").on("click touchstart",function(b){if(search_category=="video"){destroyExistingPlayer()}if(res_design!==1||(res_design===1&&search_category!=="pics")){closeDetailView()}addActiveClass(search_category)});jQuery("#"+search_category+"-lemmon-slider-id").trigger("endPostThumbDispAlay")}function getDeviceType(){var a="pc";var b="";if(typeof navigator!=="undefined"&&navigator!==null&&typeof navigator.userAgent!=="undefined"){b=navigator.userAgent}if(b===""){return a}if(/ipod|iphone|ipad|BlackBerry|Nokia|Opera\40Mobi|SAMSUNG-SGH-T749|android|Windows\40Phone/i.test(navigator.userAgent)){a="mobile"}return a}function getEventType(){var a="click";var b=getDeviceType();if(b=="mobile"){a="touchstart"}return a}function hoverEffectSimulation(e){if(search_category=="pics"){var d=e.find(".transparent-hover");if(res_design===1&&e.prop("nodeName")==="LI"){e=e.find("div.multimedia_thumb")}e.css("border","1px solid #00379e");d.css("visibility","visible");var c=e.find("img").width();var a=e.find("img").height();if(c<40){if(res_design===1&&a<=70){d.addClass("extreem-small-th")}d.addClass("extreem-narrow-th")}else{if(c<82){if(res_design===1&&a<=75){d.addClass("very-small-th")}d.addClass("very-narrow-th")}else{if(c<110){if(res_design===1&&a<=90){d.addClass("small-th")}d.addClass("narrow-th")}else{if(c<150){d.addClass("smaller-th")}}}}}else{if(search_category=="video"){var b=e;b.css("border","1px solid #00379e")}}}function removeHoverClasses(c){if(search_category=="pics"){var b=c.find(".transparent-hover");if(res_design===1&&c.prop("nodeName")==="LI"){c=c.find("div.multimedia_thumb")}c.css("border","1px solid transparent");b.css("visibility","hidden");b.removeClass("smaller-th narrow-th very-narrow-th extreem-small-th very-small-th small-th")}else{if(search_category=="video"){var a=c;a.css("border","1px solid transparent")}}}function getClickEventObject(){var a=jQuery(".lemmon-slider ul li");if(resultLoaderStat[search_category+"-metadata"].NORESULTMSG){a=jQuery(".lemmon-slider ul li .media_container a")}return a}var startX,startY,tap;function getCoord(a,b){return/touch/.test(a.type)?(a.originalEvent||a).changedTouches[0]["page"+b]:a["page"+b]}function setTap(){tap=true;setTimeout(function(){tap=false},500)}var liStartX=0,liEndX=0,distanceX=0,tapped=false,liStartY=0,liEndY=0,distanceY=0;function checkForDeviceAndExecute(){var b=getDeviceType();var a;if(!arguments[0]){a=getClickEventObject()}else{a=arguments[0]}a.off("click").off("touchend");a.on("touchstart",function(c){liStartX=c.originalEvent.touches[0].clientX;liStartY=c.originalEvent.touches[0].clientY;liEndX=c.originalEvent.touches[0].clientX;liEndY=c.originalEvent.touches[0].clientY}).on("touchmove",function(c){liEndX=c.originalEvent.touches[0].clientX;liEndY=c.originalEvent.touches[0].clientY}).on("touchend",function(c){distanceX=liEndX-liStartX;distanceY=liEndY-liStartY;if(Math.abs(distanceX)<10&&Math.abs(distanceY)<10){c.preventDefault();performFullDisplayExecution(jQuery(this));tapped=true;return true}liStartX=0;liStartY=0;liEndX=0;liEndY=0;tapped=true;return true}).on("click",function(c){if(!tapped){performFullDisplayExecution(jQuery(this))}c.preventDefault()})}function performFullDisplayExecution(a){var d=getDeviceType();var b=getEventType();var h=jQuery('[name="ycc"]').val();var j=jQuery('[name="ysc"]').val();var e=a.find("img").attr("id");if(search_category=="video"){videoResponsiveBehaviorController.setActiveThumb(e);populateVideoDetails(e,j);if((videoResponsiveBehaviorController.isValid()&&(h==="0"&&(j!=="0"&&j!=="1"))&&(!jQuery(a).find("img").parent().hasClass("is-selected")))){videoResponsiveBehaviorController.destroyVideoPlayerPopup();checkWatchVideoClick(e);jQuery("#video_warning .opener").trigger("click");if("ontouchmove" in window){window.addEventListener("touchmove",videoResponsiveBehaviorController.disableScrollHandler)}return}else{if(videoResponsiveBehaviorController.isValid()&&(j==="0"||h==="1"||(j=="2"&&jQuery(a).find("img").parent().hasClass("is-selected")))){createYouTubePlayer(e);return}}}var l=a.find("img").attr("src");var m=$("div.media_inner_full");m.find("#full-image-view").parent("span").show();m.find("#view-image-error-msg").hide();if(search_category=="video"){if(j==1||h==2){var p=document.createElement("meta");p.name="referrer";p.content="no-referrer";document.getElementsByTagName("head")[0].appendChild(p);var k=getDetailData(e);morecounter=k[0];videoId=k[1];var o=responseData[search_category][morecounter][videoId].URL;window.open(o,"_blank");return}else{showVideoBackgroundContent()}}m.find("#full-image-low-res").removeAttr("src");m.find("#full-image-high-res").removeAttr("src");m.find("#full-image-low-res").hide();m.find("#full-image-high-res").hide();m.find("#full-image-high-res").css("opacity","0");var c=getElementToUpdate(a);if(c.hasClass("active-thumb")){if(search_category=="video"){destroyExistingPlayer()}closeDetailView();addActiveClass(search_category);if(d=="mobile"){removeHoverClasses(c)}}else{var i=getElementToUpdate(a);jQuery("#"+search_category+"-full-display").show();if(search_category=="video"){videoResponsiveBehaviorController.setState("fullView",true);destroyExistingPlayer();checkBoxSetting(e,j)}if(search_category=="pics"){jQuery("#full-image-low-res").attr("src",l)}else{if(search_category=="video"){jQuery(".media-placeholder").attr("src",l)}}jQuery("#"+search_category+"-lemmon-slider-id ul li").removeClass("active-thumb");if(d=="mobile"){var g=jQuery("#"+search_category+"-lemmon-slider-id ul li");removeHoverClasses(g)}jQuery("#"+search_category+"-full-display").removeAttr("style");if(jQuery('[name="ysc"]').val()==1||jQuery('[name="ycc"]').val()==2){jQuery("#video-full-display").css("display","none")}i.addClass("active-thumb");if(resultLoaderStat[search_category+"-metadata"].NORESULTMSG){i.attr("style","border:none !important;")}if(search_category=="video"){if(jQuery('[name="ysc"]').val()==1){i.removeClass("active-thumb")}if(jQuery('[name="ycc"]').val()==2){i.removeClass("active-thumb")}populateVideoDetails(e,j)}else{if(search_category=="pics"){if(res_design===1){populateImageDetailsRes(e,$("div.media_inner_full"));largeWidthImageHandler();updateImgVerticalPos()}else{populateImageDetails(e)}}}if(d=="mobile"){hoverEffectSimulation(i)}setDetailViewPosition(search_category);adjustMultimediaTitle(search_category);var f=("innerWidth" in window)?window.innerWidth:$(window).width();if(res_design!==1||(res_design===1&&search_category!=="pics")||(res_design===1&&search_category==="pics"&&f>narrowWinWidth)){var n;clearTimeout(n);n=setTimeout(function(){scrollFullImageVideoIntoView(search_category)},200)}$("div.media_inner_full").find("#full-image-high-res").css("cursor","default")}if(search_category=="pics"){setGrayPointerPosition()}if(search_category=="video"&&(jQuery('[name="ysc"]').val()!=1||jQuery('[name="ycc"]').val()!=2)){setGrayPointerPosition()}if(res_design===1&&search_category==="pics"&&$("#pics-full-display").is(":visible")){if(search_category==="pics"){scaleImageToFitWindow(e)}}}function adjustMultimediaTitle(a){var e=a;if(a=="pics"){e="image"}var j=document.getElementById("full-"+e+"-name").scrollHeight;var h=41;if(a=="pics"){h=30}if(h<30||j==0){return}var f=jQuery("#full-"+e+"-name");var i=f.css("padding-top");i=i.replace("px","");var b=f.css("padding-bottom");b=b.replace("px","");var g=parseInt(i)+parseInt(b);var c=h-g;c=c*3;c=c+g;var d="#full-"+e+"-name";adjustContent(d,c)}function scrollFullImageVideoIntoView(g){var c="innerWidth" in window?window.innerWidth:$(window).width();if(res_design===1&&c<=narrowWinWidth&&search_category==="pics"&&$(search_category+"-full-display").is(":visible")){return}var f=0;var b=$("div.navbar").height();var e=jQuery("#"+g+"-lemmon-slider-wrapper ul li:first").css("margin-top");e=parseInt(e.replace("px",""));if(res_design===1&&g==="pics"&&e===0){e=jQuery("#"+g+"-lemmon-slider-wrapper ul").css("padding-top");e=parseInt(e.replace("px",""))}if($("#"+g+"-full-display").css("display")=="block"){f=jQuery("#"+g+"-full-display").offset().top-jQuery("#"+g+"-lemmon-slider-wrapper ul li:first").height();e=e+10;f=f-b-e;animateThumbnailAndDetailView(f)}else{var h=checkIfThumbSelected();var d=$("#"+h).offset().top;f=d;f=f-$(window).scrollTop();var a=$(window).height();if(f>=(a-200)){f=d-100;animateThumbnailAndDetailView(f)}else{if(f<0){f=d;f=f-b-e;animateThumbnailAndDetailView(f)}}}}function animateThumbnailAndDetailView(a){var b=jQuery("html, body");b.clearQueue();b.animate({scrollTop:a},"400","swing")}function getElementToUpdate(a){if(resultLoaderStat[search_category+"-metadata"].NORESULTMSG){a=a.parent().parent()}return a}function populateImageDetails(c){fullImgId=c;var g=getDetailData(c);morecounter=g[0];c=g[1];var d=responseData[search_category][morecounter][c].URL;var f=responseData[search_category][morecounter][c].ORIGIMGURL;var e=responseData[search_category][morecounter][c].VIEWIMGURL;resultLoaderStat[search_category+"-detailed-img"]=f;jQuery("#full-image-high-res").attr("src",f);jQuery("#full-image-high-res").trigger("hdImageSuccess");loadImage(f,morecounter+"-"+c).fail(function(h){if(!h.complete||(typeof h.naturalWidth!=="undefined"&&h.naturalWidth===0)){jQuery(".active-thumb img").attr("loaded",0);jQuery("#full-image-high-res").trigger("hdImageFail");jQuery("#full-image-view").parent("span").fadeOut("slow",function(){jQuery("#view-image-error-msg").fadeIn()})}});loadImage(f,morecounter+"-"+c).done(function(j){var i="pics-image-"+j.id;var h=jQuery(".active-thumb").find("img").attr("id");if(i===h&&j.complete&&(typeof j.naturalWidth!=="undefined")&&j.naturalWidth>0){jQuery(".active-thumb img").attr("loaded",1);jQuery("#full-image-high-res").css("opacity","1")}});setImageDimensions(fullImgId);jQuery("#full-image-low-res").show();jQuery("#full-image-high-res").show();jQuery("#full-image-name").html(responseData[search_category][morecounter][c].TITLE);jQuery("#full-image-res").html(responseData[search_category][morecounter][c].WIDTH+" &times; "+responseData[search_category][morecounter][c].HEIGHT);var a="";if(d){a=d.match(/^(http[s]?:\/\/)?(www\.)?([^\/]+)/);jQuery("#full-image-domain").html(a[3])}jQuery("#full-image-page").attr("href",responseData[search_category][morecounter][c].URL);if(resultLoaderStat[search_category+"-metadata"]["always_anonymous_image"]&&(resultLoaderStat[search_category+"-metadata"]["always_anonymous_image"]==1)){jQuery("#full-image-page-anonymous").attr("href",responseData[search_category][morecounter][c].ANONYMOUSURL)}if(resultLoaderStat[search_category+"-metadata"]["NORESULTMSG"]){jQuery(".visit-page1").remove();jQuery("#full-image-domain").html("")}jQuery("#full-image-view").attr("href",e);var b=decodeURIComponent(responseData[search_category][morecounter][c].ORIGIMGURL.match(/url=(.+)?\&sp=/)[1]);jQuery(".view_npi").attr("href",b)}function getDetailData(a){element=a.split("-");morecounter=element[2];a=element[3];a=a.match(/\d+$/)[0];return[morecounter,a]}function closeDetailView(){jQuery("#"+search_category+"-full-display").slideUp(0);jQuery("#"+search_category).removeClass("active");jQuery("#active-thum-pointer").css("display","none");jQuery(".active-thumb").removeClass("active-thumb");if(search_category=="video"){videoResponsiveBehaviorController.setState("fullView",false)}var a="innerWidth" in window?window.innerWidth:$(window).width();if(res_design===1&&search_category==="pics"&&a<=narrowWinWidth){if(!("ontouchstart" in window)){gridMultimediaResizer(search_category)}restoreDefaultImageBehaviorNarrow();addActiveClass(search_category);removeHoverClasses($("#"+search_category+"-lemmon-slider-ul li"));$(window).trigger("resize.rowGrid");var b=document.getElementById("pics-full-display");b.removeEventListener("touchstart",detailTouchStartHandler);b.removeEventListener("touchmove",detailMoveHandler)}}function addActiveClass(a){if(!jQuery("#"+a).hasClass("active")){jQuery("#"+a).addClass("active")}}function setGrayPointerPosition(){var d=("innerWidth" in window)?window.innerWidth:jQuery(window).width();if(res_design===1&&search_category==="pics"&&d<=narrowWinWidth){return}if(jQuery(".active-thumb").length){var c=jQuery(".active-thumb").offset().left;var f=jQuery(".active-thumb").width();var g=c-picsThumbImgGap/2+f/2;var d=jQuery(window).width()-25;if(g>d){g=-100}jQuery("#active-thum-pointer").css("left",g);var b=jQuery(".active-thumb").offset().top;var j=jQuery(".active-thumb").height();if(res_design===1&&search_category=="pics"){var h=jQuery("li.active-thumb").height();var e=jQuery("li.active-thumb").find("div.multimedia_thumb").height();var a=0;if(h>e+1){a=parseInt(((h-e)/2),10);a=a-1}j=e+a}var i=0;if(search_category=="video"||search_category=="pics"){i=b+j}if(jQuery("#"+search_category+"-lemmon-slider-wrapper").hasClass("full-grid")){i=i+1}jQuery("#active-thum-pointer").css("top",i);jQuery("#active-thum-pointer").css("display","block")}}function setDetailViewPosition(g){var c=("innerWidth" in window)?window.innerWidth:jQuery(window).width();if(jQuery(".active-thumb").length){var b=jQuery(".active-thumb").attr("id");var a=jQuery(".active-thumb").offset().top;var f=jQuery(".active-thumb").height();var e=jQuery("#active-thum-pointer").height();var d=Math.round(a+f+e)-1;if(jQuery("#"+g+"-lemmon-slider-wrapper").hasClass("full-grid")){d+=1;if(res_design===1&&g==="pics"&&c<=narrowWinWidth&&(MY_BROWSER!="IE"||(parseInt(MY_BROWSER_VERSION,10)!=8))){jQuery("#"+g+"-full-display").css({position:"absolute"})}else{jQuery("#"+g+"-full-display").css({top:d,position:"absolute"})}if(res_design===1&&g==="pics"){jQuery("#"+g+"-full-display").css("margin-top","0px")}}}}function gridMultimediaResizer(a,g,e,j){if(a=="video"||(res_design===1&&a==="pics")){setDetailViewPosition(a);setGrayPointerPosition();if(a=="pics"){gridPagination.handleLastRow()}return}if(res_design===1){return}var i="";var d=(a==="pics")?picsThumbImgGap:videoThumbImgGap;var c=jQuery(document).width();var m=jQuery("body").hasScrollBar(browser);var h=getScrollbarWidth();if(/IE|Safari|Edge/.test(browser)){c=jQuery(window).width();if(c<900){c=jQuery(document).width()-h}}var e=e||resultLoaderStat[a+"-loading"]-1;var g=g||0;if(e==0){return}var f=0;if(jQuery("#"+a+"-li-container-"+e).length){f=Math.round(jQuery("#"+a+"-li-container-"+e).position().left)}var n=0;if(!m){c=c-17}if(j){if(f==d&&resultLoaderStat[a+"-loading"]!=0){adjustCurrentRowElemt(a,g,e,c,d,n)}}else{resetMultimedia(0);var l=0;var k=0;for(var b=g;b<=e;b++){var f=0;if(jQuery("#"+a+"-li-container-"+b).length){f=Math.round(jQuery("#"+a+"-li-container-"+b).position().left)}if(b!=0&&f==d){k=b;resultStatus=adjustCurrentRowElemt(a,l,k,c,d,n);if(resultStatus==="trimmed"){l=b+1}else{l=b}}}jQuery(".video_container").removeClass("video_container_dim")}if(a=="video"&&e==resultLoaderStat[a+"-total-fetched-result-count"]){adjustLastRowElements(a,resultLoaderStat[a+"-firstImageCnt"],e,d)}if(a=="pics"){setDetailViewPosition(a);setGrayPointerPosition()}}function adjustCurrentRowElemt(a,j,e,b,c,o){if(j==e){return}l=e-1;var k=0;var f=0;var d=0;if(jQuery("#"+a+"-li-container-"+l).length){k=Math.round(jQuery("#"+a+"-li-container-"+l).position().left);f=Math.round(jQuery("#"+a+"-li-container-"+l).outerWidth())}if(jQuery("#"+a+"-li-container-"+e).length){d=Math.round(jQuery("#"+a+"-li-container-"+e).width())}unCoveredWidth=b-(k+f+c);var i=k+f-(c*(e-j))+d;if(unCoveredWidth>d/4||1){returnStatus="trimmed";var n=d-unCoveredWidth+c;var h=0;var l=0;for(l=j;l<=e;l++){var g=Math.round(jQuery("#"+a+"-li-container-"+l).width());trimWidth=Math.round(n*g/i);g=g-trimWidth;h+=trimWidth;jQuery("#"+a+"-li-container-"+l).width(g-o);trimImageCentered("#"+a+"-li-container-"+l)}l=l-1;var g=0;if(jQuery("#"+a+"-li-container-"+l).length){g=Math.round(jQuery("#"+a+"-li-container-"+l).width())}lastCntWidthFinal=g-(n-h)-o;jQuery("#"+a+"-li-container-"+l).width(lastCntWidthFinal);if(lastCntWidthFinal>jQuery("#"+a+"-li-container-"+l+" img").width()){jQuery("#"+a+"-li-container-"+l+" img").width(lastCntWidthFinal)}else{trimImageCentered("#"+a+"-li-container-"+l)}resultLoaderStat[a+"-firstImageCnt"]=parseInt(e)+1;resultLoaderStat[a+"-prevRowfirstImageCnt"]=parseInt(j)}else{returnStatus="enlarged";var m=0;var l=0;for(l=j;l<e;l++){var g=Math.round(jQuery("#"+a+"-li-container-"+l).width());enlargeWidth=Math.round(unCoveredWidth*g/i);g=g+enlargeWidth;m+=enlargeWidth;jQuery("#"+a+"-li-container-"+l).width(g-o);jQuery("#"+a+"-li-container-"+l+" img").width(g-o)}l--;var g=Math.round(jQuery("#"+a+"-li-container-"+l).width());lastCntWidthFinal=g+(unCoveredWidth-m)-o;jQuery("#"+a+"-li-container-"+l).width(lastCntWidthFinal);jQuery("#"+a+"-li-container-"+l+" img").width(lastCntWidthFinal);resultLoaderStat[a+"-firstImageCnt"]=parseInt(e)}return returnStatus}function trimImageCentered(d){var a=jQuery(d+" img").width();var c=jQuery(d).width();var e=a-c;if(e>0){var b=e/2;b="-"+b+"px";jQuery(d+" img").css("margin-left",b)}}function adjustLastRowElements(d,a,b,c){var e=0;prevRowfirstImageCnt=a-1;while(c!=jQuery("#"+d+"-li-container-"+prevRowfirstImageCnt).offset().left){prevRowfirstImageCnt=prevRowfirstImageCnt-1}for(tmpCntId=a;tmpCntId<=b;tmpCntId++){upperRowSameColumnElemWidth=jQuery("#"+d+"-li-container-"+(prevRowfirstImageCnt+e)).width();jQuery("#"+d+"-li-container-"+tmpCntId).width(upperRowSameColumnElemWidth);jQuery("#"+d+"-li-container-"+tmpCntId+" img").width(upperRowSameColumnElemWidth);e=e+1}}function resetMultimedia(a){jQuery('li[id^="'+search_category+'-li-container"]').each(function(b){cntId=this.id.match(/\d+$/)[0];if(cntId>=a){var c=jQuery(this).find("img").attr("owidth");jQuery(this).width(c);jQuery(this).find("img").width(c);jQuery(this).find("img").css("margin-left","0")}})}function removeContainers(a,b){if(b==="pics"){jQuery("li[id^="+b+"-li-container-]").each(function(){cont_id=jQuery(this).attr("id").toString().match(/\d+$/)[0];if(cont_id>=a){jQuery(this).remove()}})}}function showVideoBackgroundContent(){jQuery(".media-placeholder").css("visibility","visible");jQuery(".privacy-details").css("visibility","visible")}function hideVideoBackgroundContent(){jQuery(".media-placeholder").css("visibility","hidden");jQuery(".privacy-details").css("visibility","hidden")}function destroyExistingPlayer(){if(jQuery("#player").length){jQuery("#player").remove()}}function createYouTubePlayer(e){hideVideoBackgroundContent();var d=getDetailData(e);morecounter=d[0];e=d[1];var f=responseData[search_category][morecounter][e].URL;var b=f.split("=");var c="";var a;if(navigator.userAgent.match(/(iPod|iPhone|iPad)/)){a="https://www.youtube-nocookie.com/embed/"+b[1]}else{a="https://www.youtube-nocookie.com/embed/"+b[1]+"?wmode=transparent&iv_load_policy=3&autoplay=1"}c="<iframe id='player' onload=\"this.style.display = 'block'\" src="+a+" frameborder='0' allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>";videoResponsiveBehaviorController.createYouTubePlayer(c)}function checkBoxSetting(f,d){var c=jQuery('[name="ycc"]').val();var b=f;var e=getDetailData(f);morecounter=e[0];f=e[1];var a=responseData[search_category][morecounter][f].URL;if(c==2){window.open(a,"_blank");jQuery("#video-full-display").css("display","none")}if(c==1){destroyExistingPlayer();createYouTubePlayer(b)}if(c==0){if(jQuery("#remember_choice_check").is(":checked")){jQuery("#remember_choice_check").prop("checked",false);jQuery("#remember_choice_check_small").prop("checked",false)}if(jQuery("#remember_choice_check_small").is(":checked")){jQuery("#remember_choice_check").prop("checked",false);jQuery("#remember_choice_check_small").prop("checked",false)}}}function populateVideoDetails(g,d){var c=g;var e=getDetailData(g);morecounter=e[0];g=e[1];var a=responseData[search_category][morecounter][g].URL;var b=jQuery('[name="ycc"]').val();var d=jQuery('[name="ysc"]').val();if(d==2){if(jQuery("#"+c).parent().hasClass("is-selected")){destroyExistingPlayer();createYouTubePlayer(c)}else{checkWatchVideoClick(c)}}if(d==0){destroyExistingPlayer();createYouTubePlayer(c)}var f="&nbsp;";jQuery(".watch-on-youtube").attr("href",a);jQuery("#full-video-name").html(responseData[search_category][morecounter][g].TITLE);jQuery("#video-length").html(f+responseData[search_category][morecounter][g].VIDEODURATION);jQuery("#video-views").html(f+responseData[search_category][morecounter][g].VIEWCOUNT);if(resultLoaderStat["video-metadata"]["NORESULTMSG"]){jQuery("#video-views-detail").remove()}jQuery("#publish-info").html(f+responseData[search_category][morecounter][g].PUBDATE);return false}function checkWatchVideoClick(a){jQuery(".watch-video").off("click");jQuery(".watch-video").click(function(b){if(jQuery("#remember_choice_check").is(":checked")||jQuery("#remember_choice_check_small").is(":checked")){jQuery('[name="ycc"]').attr("value",1);jQuery('[name="ysc"]').attr("value",0);jQuery("#video-lemmon-slider-ul li .multimedia_thumb").each(function(){if(jQuery(this).hasClass("is-selected")){jQuery(this).removeClass("is-selected")}})}else{jQuery("#"+a).parent().addClass("is-selected")}videoResponsiveBehaviorController.closeWarningPopup();destroyExistingPlayer();createYouTubePlayer(a)})}jQuery(document).ready(function(){var e="";var c={pics:{id:"image-options",input_elem:"pics_order"},video:{id:"video-options",input_elem:"sort_by"}};var b=c[search_category]["id"];var f=c[search_category]["input_elem"];var d=jQuery('input[name="'+f+'"]');var a=jQuery("#"+b).retinaSelect();jQuery("#"+b).next(".wrapper-dropdown").width(jQuery("#"+b).outerWidth()+20);if(jQuery("ol.didyouMean").length){jQuery("div.wrapper-dropdown").css("margin-top","-97px")}if(d.length){e=d.val();if(e){checkSelectedOption(e)}}a.on("optionchanged",function(){var g=jQuery(this).val();g=g.toLowerCase();if(search_category=="pics"){imageOptionSelect(g)}else{if(search_category=="video"){videoOptionSelect(g)}}})});function filter_box_position(){var b,c,a;a=jQuery("#multimedia-div").find("#full-grid-tab").css("left");b=jQuery("#pics-multimedia-div .wrapper-dropdown");c=jQuery("#video-multimedia-div .wrapper-dropdown");b.css("left",parseInt(a)-b.width()-20);c.css("left",parseInt(a)-c.width()-20)}function checkSelectedOption(a){jQuery("#"+search_category+"-multimedia-div .wrapper-dropdown .dropdown li").find("*").removeClass("selected-option");jQuery("#"+search_category+"-multimedia-div .wrapper-dropdown .dropdown li a").each(function(){if(jQuery(this).attr("name")==a){var b=("ontouchstart" in window)?"touchend":"click";jQuery(this).trigger(b)}})}function videoOptionSelect(b){destroyExistingPlayer();closeDetailView();var a=jQuery("#"+searchFormId).find("#search #input_p div.text-fields");if(jQuery("input[name='sort_by']").length==0){jQuery(a).append("<input type='hidden' name='sort_by' value='"+b+"'>")}else{jQuery("input[name='sort_by']").val(b)}reloadPage()}function imageOptionSelect(b){closeDetailView();var a=jQuery("#"+searchFormId).find("#search #input_p div.text-fields");if(jQuery("input[name='pics_order']").length==0){jQuery(a).append("<input type='hidden' name='pics_order' value='"+b+"'>")}else{jQuery("input[name='pics_order']").val(b)}if(resultLoaderStat["pics-metadata"].qid){if(jQuery("input[name='qid']").length==0){jQuery(a).append("<input type='hidden' name='qid' value='"+resultLoaderStat["pics-metadata"].qid+"'>")}else{jQuery("input[name='pics_order']").val(resultLoaderStat["pics-metadata"].qid)}}reloadPage()}function reloadPage(){jQuery("#search_form").submit()}jQuery(window).load(function(){jQuery(".watch-on-youtube").click(function(){if(jQuery("#remember_choice_check").is(":checked")||jQuery("#remember_choice_check_small").is(":checked")){jQuery('[name="ycc"]').attr("value",2);jQuery('[name="ysc"]').attr("value",1);jQuery("#video-full-display").css("display","none");jQuery("#active-thum-pointer").css("display","none");jQuery("#video-lemmon-slider-ul li").each(function(){if(jQuery(this).hasClass("active-thumb")){jQuery(this).removeClass("active-thumb")}});setSidebarPosition()}videoResponsiveBehaviorController.closeWarningPopup()});filter_box_position()});var loadImageCache={};var loadImage=function(c,b){if(typeof loadImageCache[b]==="undefined"){var a=new $.Deferred();preloader=new Image();preloader.onload=function(){a.resolveWith(a,[this])};preloader.onerror=function(){a.rejectWith(a,[this])};preloader.src=c;preloader.id=b;loadImageCache[b]=a}return loadImageCache[b]};function substitute_for_https_url(c,b,a){jQuery.each(resultLoaderStat[c+"-broken-result-ids"][resultLoaderStat[c+"-more-result-req-count"]],function(e,f){var d=$("#"+f).attr("src");d=d.replace(/^[^?]+/,"https://sp.yimg.com/ib/th");jQuery("#"+f).attr("src",d)});checkForImageLoading(c,b,a)}(function(a){a.fn.hasScrollBar=function(b){var c=0;if(/Edge/.test(b)){c=1}return this.get(0).scrollHeight-c>this.height()}})(jQuery);function adjustMediaQueries(){if((search_category!="video")||(MY_BROWSER!="IE"||(parseInt(MY_BROWSER_VERSION,10)!=8))){return}var a=jQuery(window).width();var b=jQuery("#video-lemmon-slider-ul").find("li");if(a>=1800){b.attr("style","width:10.61% !important;visibility:visible;")}else{if(a>=1584&&a<1800){b.attr("style","width:12% !important;visibility:visible;")}else{if(a>=1440&&a<1584){b.attr("style","width:13.78% !important;visibility:visible;")}else{if(a>=1186.9&&a<1440){b.attr("style","width:16.15% !important;visibility:visible;")}else{if(a>=971.1&&a<1186.9){b.attr("style","width:19% !important;margin-right:0.5% !important;margin-left:0.5% !important;visibility:visible;")}else{if(a<971.1){b.attr("style","width:24% !important;visibility:visible;")}}}}}}}if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){jQuery(document).ready(function(){if(search_category=="video"){adjustMediaQueries()}addFullDisplayResponsiveBehavior();updateWidthOfTitles()});jQuery(window).resize(function(){if(search_category=="video"){adjustMediaQueries()}addFullDisplayResponsiveBehavior();updateWidthOfTitles()})}function updateWidthOfTitles(){if((MY_BROWSER!="IE"||(parseInt(MY_BROWSER_VERSION,10)!=8))){return}var h=$("#pics-full-display");if(search_category=="video"){h=$("#video-full-display")}if(h.css("display")=="none"){return}var b=$("div.selected-img-info");var f=$("#full-image-name");if(search_category=="video"){b=$("div.selected-video-info");f=$("#full-video-name")}var d=b.offset().left;var g=f.width();var a=d+g;var c=$(window).width();var e=c-d-20;e=e+"px";b.css("width",e)}function addFullDisplayResponsiveBehavior(){var c=$("#pics-full-display");if(search_category=="video"){c=$("#video-full-display")}if(c.css("display")=="none"){return}var a=jQuery(window).width();var b=jQuery("div.media_inner_full");if(a<=1100){b.css("position","absolute");b.css("width","870px");b.css("right","0")}else{b.css("position","relative");b.css("width","");b.css("right","")}}function getScrollbarWidth(){var d=jQuery('<div style="width: 100%; height:200px;">test</div>'),b=jQuery('<div style="width:200px;height:150px; position: absolute; top: 0; left: 0; visibility: hidden; overflow:hidden;"></div>').append(d),a=d[0],c=b[0];jQuery("body").append(c);var g=a.offsetWidth;b.css("overflow","scroll");var e=c.clientWidth;b.remove();var f=parseInt((g-e),10);return f}function checkIfThumbSelected(){var a="";if(search_category=="pics"){$("#"+search_category+"-lemmon-slider-ul").find("li div.transparent-hover").each(function(){var b=$(this);if(b.css("visibility")=="visible"){a=b.closest("li").attr("id");return true}})}else{if(search_category=="video"){$("#"+search_category+"-lemmon-slider-ul").find("li").each(function(){var b=$(this);var c=$(this).css("borderTopColor");if(!(c.match(/(\(0, 0, 0, 0\)|transparency|transparent)/))){a=$(this).attr("id");return true}})}}return(a=="")?(search_category+"-li-container-0"):a}function getThumbNumber(a){if(a){a=parseInt(a.replace(/^\D+/g,""),10)}return a}function simulateNavigationBehavior(b){if($("#query_top").is(":focus")){return}var d="",e="";var c=search_category+"-li-container-";d=checkIfThumbSelected();e=getThumbNumber(d);if(e==0&&$("#"+search_category+"-li-container-0").data("count")==0){$("#"+search_category+"-li-container-0").data("count",1)}else{if(e==0&&$("#"+search_category+"-li-container-0").data("count")==2&&b=="right"){e=e+1}else{$("#"+search_category+"-li-container-0").data("count",2);if(b=="left"){e=e-1}else{if(b=="right"){e=e+1}}}}d=c+e;if($("#"+d).length){removeHoverClasses(jQuery("#"+search_category+"-lemmon-slider-ul li"));hoverEffectSimulation($("#"+d))}var a;clearTimeout(a);a=setTimeout(function(){scrollFullImageVideoIntoView(search_category)},200)}function setImageContainerHeight(){var a=$("#head_left").outerHeight()+$("#footer").outerHeight()+$(".navbar").outerHeight();a=a-5;jQuery("#"+search_category+"-lemmon-slider-wrapper").css("min-height",$(window).height()-a)}$(document).keydown(function(f){if(typeof $("#"+search_category+"-li-container-0").data("count")==="undefined"){$("#"+search_category+"-li-container-0").data("count",0)}var b={"#loadingId":"visible","div.pop_container":"visible","#query_top":"focus","ul.exactly input:text":"focus"};for(var a in b){if($(a).is(":"+b[a])){return}}var g={left:37,right:39,esc:27,enter:13,tab:9};var d="",h="";switch(f.which){case g.left:if($("li.active-thumb").length==0){simulateNavigationBehavior("left")}else{if($("li.active-thumb").prev().length){if(res_design===1&&!resultLoaderStat[search_category+"-metadata"].p){if($("img.full-image").css("visibility")==="hidden"){$("img.full-image, div.selected-img-info").css("visibility","visible")}if($("div.media_inner_full").find("div.loading_icon_detail").length){$("div.media_inner_full").find("div.loading_icon_detail").remove();$("li.active-thumb").trigger("click").trigger("click");break}}removeHoverClasses(jQuery("#"+search_category+"-lemmon-slider-ul li"));hoverEffectSimulation($("li.active-thumb").prev());$("li.active-thumb").prev().trigger("click")}}break;case g.right:if($("li.active-thumb").length==0){simulateNavigationBehavior("right")}else{if((res_design!==1&&$("li.active-thumb").next().length)||(res_design===1&&$("li.active-thumb").next("li").length&&$("li.active-thumb").next("li").is(":visible"))){removeHoverClasses(jQuery("#"+search_category+"-lemmon-slider-ul li"));hoverEffectSimulation($("li.active-thumb").next());$("li.active-thumb").next().trigger("click")}else{if(res_design===1&&search_category==="pics"&&resultLoaderStat[search_category+"-more-result"]&&$(window).width()<=narrowWinWidth&&!resultLoaderStat[category+"-metadata"].p){$("img.full-image, div.selected-img-info").css("visibility","hidden");var c="";if($("div.media_inner_full").find("div.loading_icon_detail").length===0){addLoadingIconInDetailView($("div.media_inner_full"))}if(triggerNextAjaxCall){fetchResults(search_category,"detail_view")}}}}break;case g.enter:if(!($("#query_top").is(":focus"))){if($("li.active-thumb").length==0){d=checkIfThumbSelected();$("#"+d).trigger("click")}else{if(search_category=="pics"){$("#full-image-high-res").trigger("click")}}}break;case g.esc:if(search_category=="video"){destroyExistingPlayer()}closeDetailView();addActiveClass(search_category);default:return}});function scaleImageToFitWindow(r,w){if(search_category==="video"){return}if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}var j=("innerWidth" in window)?window.innerWidth:$(window).width();if(j>narrowWinWidth){$("div.media_inner_full").find("#narrow-detail-dropdown").remove();$("div.selected-img-info").css("visibility","visible");$("label.image-properties").show();$("#pics-full-display").removeClass("narrow-detail-view")}if(!$("#pics-full-display").is(":visible")){return}if($("#"+search_category+"-full-display").is(":visible")&&j<=narrowWinWidth&&"ontouchstart" in window){var q=document.getElementById("pics-full-display");q.addEventListener("touchstart",detailTouchStartHandler);q.addEventListener("touchmove",detailMoveHandler)}var b=("innerHeight" in window)?window.innerHeight:$(window).height();var v="";var i=0;var l=0;var k=0;var p=screen.width;if(w&&w==="detail_view"){$("#pics-lemmon-slider-ul li").removeClass("active-thumb");$("#"+r).closest("li").addClass("active-thumb")}r=(r)?r:$("li.active-thumb").find("img").attr("id");var g=r;var f=$("#"+r).closest("li").attr("id");var c=getNeededImgId(f,"prev");var n=getNeededImgId(f,"next");var u=c[0];var s=c[1];var e=n[0];var t=n[1];if(w&&w==="detail_view"){$("div.media_inner_full").find("#full-image-low-res").attr("src",$("#"+g).attr("src"))}if(typeof $(".media_inner_full").attr("src")==="undefined"){$("div.media_inner_full").find("#full-image-low-res").attr("src",$("#"+g).attr("src"))}$("div.media_inner_full, div.media_inner_full_prev, div.media_inner_full_next").find("div.loading_icon_detail").remove();$("div.media_inner_full, div.media_inner_full_prev, div.media_inner_full_next").find("img.full-image, div.selected-img-info").css("visibility","visible");populateImageDetailsRes(r,$("div.media_inner_full"));if(j<=narrowWinWidth){setNarrowDetailViewAttributes();var a=$("<div id='narrow-detail-dropdown'>X</div>");$("div.media_inner_full").find("#narrow-detail-dropdown").remove();$("div.media_inner_full").find("#full-image-domain").after(a);var h=$("<p class='arrow'></p>");$("div.media_inner_full").find("p.arrow").remove();$("div.media_inner_full").find("#view-image-error-msg").after(h);$("#"+search_category+"-full-display").addClass("narrow-detail-view")}var m="";if($("#"+s).length&&$("div.media_inner_full_prev").length===0){m=$("div.media_inner_full").clone();m.removeClass("media_inner_full").addClass("media_inner_full_prev");m.find("#full-image-high-res").removeAttr("src");m.css("margin-left","");$("div.media_inner_full").before(m)}else{if($("#"+s).length===0&&$("div.media_inner_full_prev").length){$("div.media_inner_full_prev").remove()}}if(resultLoaderStat[category+"-metadata"].p&&!$("#"+t).length){$("div.media_inner_full_next").remove()}else{if($("#"+t).length&&$("div.media_inner_full_next").length===0){m=$("div.media_inner_full").clone();m.removeClass("media_inner_full").addClass("media_inner_full_next");m.find("#full-image-high-res").removeAttr("src");m.css("margin-left","");$("div.media_inner_full").after(m)}else{if($("#"+t).length===0&&resultLoaderStat[search_category+"-more-result"]&&!resultLoaderStat[category+"-metadata"].p){$("div.media_inner_full_next").remove();m=$("div.media_inner_full").clone();m.removeClass("media_inner_full").addClass("media_inner_full_next");m.find("img.full-image, div.selected-img-info").removeAttr("src").css("visibility","hidden");m.css("margin-left","");$("div.media_inner_full").after(m);addLoadingIconInDetailView($("div.media_inner_full_next"));lastElemId=$("li.active-thumb").attr("id");lastElemId=parseInt(lastElemId.replace(/^\D+/g,""),10);$("div.media_inner_full div.results_err_msg_mobile, div.media_inner_full_next div.results_err_msg_mobile").remove();var o="results_err_msg";if("ontouchstart" in window){o="results_err_msg_mobile"}if(jQuery("#"+search_category+"-lemmon-slider-wrapper").find("div."+o).length){fetchAfterFailedRequest("detail_view")}else{if(search_category==="pics"&&j<=narrowWinWidth&&$("#"+search_category+"-lemmon-slider-wrapper").find("div.more_icon").length){jQuery(".more_icon").remove();removeAndAddLoaderContent(search_category);triggerNextAjaxCall=true}fetchResults(search_category,"detail_view")}}}}if($("#"+s).length){populateImageDetailsRes(s,$("div.media_inner_full_prev"))}if($("#"+t).length){populateImageDetailsRes(t,$("div.media_inner_full_next"))}var d=j;$("div.media_inner_full_prev").css("left",-d);$("div.media_inner_full_next").css("left",d);if(j<=narrowWinWidth){$("div.media_inner_full, div.media_inner_full_prev, div.media_inner_full_next").addClass("detail_pane");$("div.media_inner_full").css("left",0);$("div.detail_pane").css("height",b);if($("div.media_inner_full").length){$("div.media_inner_full").addClass("current_detail");rescaleDetailImages(g,$("div.media_inner_full"))}if($("div.media_inner_full_prev").length){rescaleDetailImages(s,$("div.media_inner_full_prev"))}if($("div.media_inner_full_next").length){rescaleDetailImages(t,$("div.media_inner_full_next"))}}}function setNarrowDetailViewAttributes(){if(search_category!=="pics"){return}if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}var a=("innerHeight" in window)?window.innerHeight:$(window).height();var b=$(window).scrollTop();$("body").css("overflow","hidden");$("div.media_inner_full").css("margin-left","0px");$("div.navbar, #footer, div.settings_cont").hide();$("#active-thum-pointer").css("display","none");$("label.image-properties").hide();$("#pics-full-display").css("top",b);$("#pics-full-display").css("height",a);$("div.media_inner_full").css("height",a)}function rescaleDetailImages(c,f){if(search_category!=="pics"){return}if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}if($("#"+c).length===0){return}var d=("innerWidth" in window)?window.innerWidth:$(window).width();var a=screen.width;var e=("innerHeight" in window)?window.innerHeight:$(window).height();var b=0,g=0;var j=0;var i=0;if(c){imgData=getDetailData(c);morecounter=imgData[0];c=imgData[1];origWidth=responseData[search_category][morecounter][c]["WIDTH"];origHeight=responseData[search_category][morecounter][c]["HEIGHT"]}j=origWidth;i=origHeight;i=i*(d/j);j=d;if(i>e){j=j*(e/i);i=e}j=(j>origWidth)?origWidth:j;i=(i>origHeight)?origHeight:i;b=(d-j)/2;g=(e-i)/2;var h=f.find("img.full-image");h.css({width:j,height:i,"margin-left":b,"margin-top":g,left:0,top:0})}function getNeededImgId(b,g){if($("li.active-thumb").length===0){return}var a=$("#"+b).find("img").attr("id");var c=b.split("-");var f=c[3];f=parseInt(f,10);if(g==="prev"){f=f-1}else{if(g==="next"){f=f+1}}var d="";var e=search_category+"-li-container-"+f;if($("#"+e).length){d=$("#"+e).find("img").attr("id")}return[e,d,f]}function restoreDefaultImageBehaviorNarrow(){if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}$("body").css("overflow","visible");$("div.navbar, #footer, div.settings_cont").show()}function restoreDefaultImageBehavior(){if(search_category!=="pics"){return}if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}$("div.detail_pane_all").each(function(){if($(this).find("#narrow-detail-dropdown").length){$(this).find("#narrow-detail-dropdown").remove()}});$("div.media_inner_full_prev, div.media_inner_full_next, div.media_inner_full").removeClass("detail_pane");$("#pics-full-display").removeClass("narrow-detail-view");$("img.full-image").css({"margin-top":"","margin-left":"",left:"",top:"",width:"",height:""});$("body").css("overflow","visible");$("div.navbar, #footer, div.settings_cont").show();$("div.media_inner_full").css({height:"","margin-left":"",left:""});$("#pics-full-display").css({height:"",position:"","margin-top":""});$("label.image-properties").show();var a=$("li.active-thumb").find("img").attr("id");if($("#"+a).length){setImageDimensions(a,"",$("div.media_inner_full"))}gridMultimediaResizer(search_category);largeWidthImageHandler();updateImgVerticalPos();var b=$(window).width();$("div.media_inner_full_prev").css("left",-b);$("div.media_inner_full_next").css("left",b);$("div.media_inner_full_prev, div.media_inner_full_next").css({height:""});setTimeout(function(){setDetailViewPosition(search_category);setGrayPointerPosition();if(search_category=="pics"){gridPagination.handleLastRow()}},100);if($("#pics-full-display").is(":visible")){var d=$("li.active-thumb").attr("id");var g=getNeededImgId(d,"prev");var e=getNeededImgId(d,"next");var c=g[1];var f=e[1];if($("#"+c).length){setImageDimensions(c,"",$("div.media_inner_full_prev"))}if($("#"+f).length){setImageDimensions(f,"",$("div.media_inner_full_next"))}}}function loadHighResolutionImage(b,e){var d=getDetailData(b);var f=d[0];var b=d[1];var c=responseData[search_category][f][b].ORIGIMGURL;resultLoaderStat[search_category+"-detailed-img"]=c;if(e.hasClass("media_inner_full")){e.find("#full-image-high-res").css("opacity","0");e.find("#full-image-high-res").attr("src",c);e.find("#full-image-high-res").trigger("hdImageSuccess");loadImage(c,f+"-"+b).fail(function(g){if(!g.complete||(typeof g.naturalWidth!=="undefined"&&g.naturalWidth===0)){$("li.active-thumb img").attr("loaded",0);e.find("#full-image-high-res").trigger("hdImageFail");e.find("#full-image-view").parent("span").fadeOut("slow",function(){e.find("#view-image-error-msg").fadeIn()})}});loadImage(c,f+"-"+b).done(function(i){var h="pics-image-"+i.id;var g=$("li.active-thumb").find("img").attr("id");if(h===g&&i.complete&&(typeof i.naturalWidth!=="undefined")&&i.naturalWidth>0){$("li.active-thumb img").attr("loaded",1);e.find("#full-image-high-res").css("opacity","1")}});var a=decodeURIComponent(responseData[search_category][f][b].ORIGIMGURL.match(/url=(.+)?\&sp=/)[1]);e.find(".view_npi").attr("href",a)}else{e.find("#full-image-high-res").removeAttr("src")}}function populateImageDetailsRes(b,h,g){var j=b;var c=getDetailData(b);var f=c[0];var b=c[1];if(!g){h.find("#full-image-low-res").attr("src",$("#"+j).attr("src"))}var a=responseData[search_category][f][b].URL;var k=responseData[search_category][f][b].ORIGIMGURL;var i=responseData[search_category][f][b].VIEWIMGURL;if(!g){loadHighResolutionImage(j,h)}var e=("innerWidth" in window)?window.innerWidth:$(window).width();if(e>narrowWinWidth){setImageDimensions(j,"",h)}h.find("#full-image-low-res").show();h.find("#full-image-high-res").show();h.find("#full-image-name").html(responseData[search_category][f][b].TITLE);h.find("#full-image-res").html(responseData[search_category][f][b].WIDTH+" &times; "+responseData[search_category][f][b].HEIGHT);var d="";if(a){d=a.match(/^(http[s]?:\/\/)?(www\.)?([^\/]+)/);h.find("#full-image-domain").html(d[3])}h.find("#full-image-page").attr("href",responseData[search_category][f][b].URL);if(resultLoaderStat[search_category+"-metadata"]["always_anonymous_image"]&&(resultLoaderStat[search_category+"-metadata"]["always_anonymous_image"]==1)){h.find("#full-image-page-anonymous").attr("href",responseData[search_category][f][b].ANONYMOUSURL)}if(resultLoaderStat[search_category+"-metadata"]["NORESULTMSG"]){h.find(".visit-page1").remove();h.find("#full-image-domain").html("")}h.find("#full-image-view").attr("href",i)}function updateImgVerticalPos(){var h=$("div.media_inner_full");h.find("img.full-image").css("margin-top","");h.find("div.selected-img-info").css("margin-top","");var b=("innerWidth" in window)?window.innerWidth:$(window).width();var g=h.parent().css("display");var f=268;var a=0;var d=0;var c=0;var e=0;if(b<=768||g==="none"){return}a=h.find("#full-image-low-res").height();e=h.find("div.selected-img-info").height();d=h.parent().height();c=(d-a)/2;h.find("img.full-image").css("margin-bottom",0);h.find("img.full-image").css("margin-top",c);c=(d-e)/2;h.find("div.selected-img-info").css("margin-top",c)}function largeWidthImageHandler(f,e){if(search_category!=="pics"){return}var d=$("div.media_inner_full");var g=d.find("#full-image-low-res").width();var b=("innerWidth" in window)?window.innerWidth:$(window).width();if(g<550){d.css({left:"","margin-left":""})}if(b>=1100){d.css("margin-left","213px")}var i=0;var a=(f)?f:213;var c=(e)?e:30;var h=a-c;if(g<550||b<=900){return}i=b-1200;if(i<-h){i=-h}if(b<1100){d.css("left",i)}else{if(b>=1100&&b<=1200){i=i*-1;i=a-i;d.css("margin-left",i)}}}var leftX=0;var pageSize=360;var threshold=pageSize/2;var mouseStart,mouseMoveDelta,movedRight,moving;var finalPoint=0;var prevLeftX=0;var nextLeftX=0;var currentLeftX=0;var showLeftImg=false;var showRightImg=false;var lastElemId=0;$("#pics-full-display").on("touchstart",function(b){b.stopPropagation();pageSize=("innerWidth" in window)?window.innerWidth:$(window).width();var e=$(b.target).attr("id");if(pageSize>narrowWinWidth||e==="narrow-detail-dropdown"||e==="image-close"){return}var c="",a="",d="",f="";moving=true;mouseStart=b.originalEvent.touches[0].clientX;finalPoint=b.originalEvent.touches[0].clientX;if($("div.media_inner_full").find("div.loading_icon_detail").length){$("div.media_inner_full_next").find("div.loading_icon_detail").remove();$("div.media_inner_full_next div.results_err_msg_mobile").remove();$("div.media_inner_full_next").find("img.full-image, div.selected-img-info").css("visibility","hidden")}if($("div.media_inner_full_prev").find("div.loading_icon_detail").length){$("div.media_inner_full_prev").find("div.loading_icon_detail").remove();$("div.media_inner_full_prev div.results_err_msg_mobile").remove();$("div.media_inner_full_prev").find("img.full-image, div.selected-img-info").css("visibility","visible")}if($("div.media_inner_full_prev").find("img.full-image").css("visibility")==="hidden"){$("div.media_inner_full_prev").find("img.full-image, div.selected-img-info").css("visibility","visible")}$(this).on("touchmove",function(g){if(pageSize>narrowWinWidth){return}g.stopPropagation();mouseMoveDelta=g.originalEvent.touches[0].clientX-mouseStart;finalPoint=g.originalEvent.touches[0].clientX;movedRight=(mouseMoveDelta<0)?true:false;currentLeftX=0;if(movedRight===false){prevLeftX=-pageSize;$(".media_inner_full_prev").css({left:(prevLeftX+mouseMoveDelta)});$(".media_inner_full").css({left:(currentLeftX+mouseMoveDelta)})}else{if($("div.media_inner_full_next").length===0){c=$("li.active-thumb").attr("id");a=getNeededImgId(c,"next");a=a[2];a=search_category+"-li-container-"+a;if($("#"+a).length){f=$("#"+a).find("img").attr("id");d=$("div.media_inner_full").clone();d.removeClass("media_inner_full").addClass("media_inner_full_next");d.css("left",pageSize);$("div.media_inner_full").after(d);$("div.media_inner_full_next").find("#full-image-low-res").attr("src",$("#"+f).attr("src"));populateImageDetailsRes(f,$("div.media_inner_full_next"));rescaleDetailImages(f,$("div.media_inner_full_next"))}}nextLeftX=pageSize;$(".media_inner_full_next").css({left:(nextLeftX+mouseMoveDelta)});$(".media_inner_full").css({left:(currentLeftX+mouseMoveDelta)})}})});$("#pics-full-display").on("touchend",function(a){a.stopPropagation();var b=$(a.target).attr("id");if(pageSize>narrowWinWidth||b==="narrow-detail-dropdown"||b==="image-close"){return}$(this).off("touchmove");if(moving){moving=false;handleEndOfMovement(finalPoint)}});function handleEndOfMovement(a){pageSize=("innerWidth" in window)?window.innerWidth:$(window).width();threshold=pageSize/3;if($("html").hasClass("landscape")){threshold=pageSize/4}mouseMoveDelta=a-mouseStart;if(mouseMoveDelta<-threshold&&movedRight===true){showRightImg=true;showLeftImg=false;$("label.image-properties").hide()}else{if(mouseMoveDelta>threshold&&movedRight===false){showLeftImg=true;showRightImg=false;$("label.image-properties").hide()}else{showRightImg=false;showLeftImg=false}}transitionPageMovement()}function transitionPageMovement(){pageSize=("innerWidth" in window)?window.innerWidth:$(window).width();var g="";var r=0;var k="";var c="";var d="";var o="";var q="";var b=false;var j=false;$("div.detail_pane").each(function(){var s=$("<div id='narrow-detail-dropdown'>X</div>");if($(this).find("#narrow-detail-dropdown").length===0){$(this).find("#full-image-domain").after(s)}});if(showLeftImg){g=$("li.active-thumb").attr("id");r=getNeededImgId(g,"prev");r=r[2];r=search_category+"-li-container-"+r;if($("div.media_inner_full").find("div.loading_icon_detail").length===0){if($("#"+r).length){$("#"+g).removeClass("active-thumb");$("#"+r).addClass("active-thumb")}}if($("div.media_inner_full_prev").length===0){$(".media_inner_full").stop().animate({left:0},200);return}else{$(".media_inner_full_prev").animate({left:0},200,"linear");$(".media_inner_full").animate({left:pageSize},200,"linear")}c=$("li.active-thumb").attr("id");var e=$("li.active-thumb").find("img").attr("id");var a=getNeededImgId(c,"prev");var h=getNeededImgId(c,"next");var l=a[1];var n=h[1];var i="";if($("div.media_inner_full_next").length===0&&$("#"+n).length){i=$("div.media_inner_full").clone();i.removeClass("media_inner_full").addClass("media_inner_full_next");i.css("left",pageSize);$("div.media_inner_full").after(i);$("div.media_inner_full_next").find("#full-image-low-res").attr("src",$("#"+n).attr("src"));populateImageDetailsRes(n,$("div.media_inner_full_next"))}var f=$("div.media_inner_full_next");var m=f.find("#full-image-low-res").attr("style");f.find("#full-image-low-res").remove();var p=$("<img id='full-image-low-res' class='full-image'>");f.find("#image-close").after(p);p.attr("src",$("#"+l).attr("src"));p.attr("style",m);$("div.detail_pane").each(function(){if($(this).hasClass("media_inner_full_prev")){$(this).removeClass("media_inner_full_prev").addClass("media_inner_full_curr")}else{if($(this).hasClass("media_inner_full_next")){$(this).removeClass("media_inner_full_next").addClass("media_inner_full_left").css("left",-pageSize)}else{if($(this).hasClass("media_inner_full")){$(this).removeClass("media_inner_full").addClass("media_inner_full_right")}}}$(this).find("#full-image-high-res").removeAttr("src").css("opacity","0")});$("div.detail_pane").each(function(){if($(this).hasClass("media_inner_full_right")){$(this).removeClass("media_inner_full_right").removeClass("current_detail").addClass("media_inner_full_next")}else{if($(this).hasClass("media_inner_full_curr")){$(this).removeClass("media_inner_full_curr").addClass("media_inner_full").addClass("current_detail")}else{if($(this).hasClass("media_inner_full_left")){$(this).removeClass("media_inner_full_left").removeClass("current_detail").addClass("media_inner_full_prev");if($("#"+l).length){populateImageDetailsRes(l,$("div.media_inner_full_prev"),1);rescaleDetailImages(l,$("div.media_inner_full_prev"))}else{$("div.media_inner_full_prev").remove()}}}}});$("#pics-lemmon-slider-ul li img").removeAttr("loaded");loadHighResolutionImage(e,$("div.media_inner_full"),1)}else{if(showRightImg){g=$("li.active-thumb").attr("id");r=getNeededImgId(g,"next");r=r[2];r=search_category+"-li-container-"+r;if($("div.media_inner_full").find("div.loading_icon_detail").length===0){if($("#"+r).length){$("#"+g).removeClass("active-thumb");$("#"+r).addClass("active-thumb")}}if($("div.media_inner_full_next").length===0){$(".media_inner_full").stop().animate({left:0},200);return}else{if($("div.media_inner_full").find("div.loading_icon_detail").length){$(".media_inner_full_prev").stop().animate({left:-pageSize},200);$(".media_inner_full").stop().animate({left:0},200);return}else{$(".media_inner_full_next").animate({left:0},200,"linear");$(".media_inner_full").animate({left:-pageSize},200,"linear")}}c=$("li.active-thumb").attr("id");var e=$("li.active-thumb").find("img").attr("id");var a=getNeededImgId(c,"prev");var h=getNeededImgId(c,"next");var l=a[1];var n=h[1];var i="";if($("div.media_inner_full_prev").length===0){i=$("div.media_inner_full").clone();i.removeClass("media_inner_full").addClass("media_inner_full_prev");i.css("left",-pageSize);$("div.media_inner_full").before(i);$("div.media_inner_full_prev").find("#full-image-low-res").attr("src",$("#"+l).attr("src"));populateImageDetailsRes(l,$("div.media_inner_full_prev"))}var f=$("div.media_inner_full_prev");var m=f.find("#full-image-low-res").attr("style");f.find("#full-image-low-res").remove();var p=$("<img id='full-image-low-res' class='full-image'>");f.find("#image-close").after(p);p.attr("src",$("#"+n).attr("src"));p.attr("style",m);$("div.detail_pane").each(function(){if($(this).hasClass("media_inner_full_prev")){$(this).removeClass("media_inner_full_prev").addClass("media_inner_full_right").css("left",pageSize)}else{if($(this).hasClass("media_inner_full_next")){$(this).removeClass("media_inner_full_next").addClass("media_inner_full_curr")}else{if($(this).hasClass("media_inner_full")){$(this).removeClass("media_inner_full").addClass("media_inner_full_left")}}}$(this).find("#full-image-high-res").removeAttr("src").css("opacity","0")});$("div.detail_pane").each(function(){if($(this).hasClass("media_inner_full_right")){$(this).removeClass("media_inner_full_right").removeClass("current_detail").addClass("media_inner_full_next").css("left",pageSize);if($("#"+n).length){$("div.media_inner_full_next").find("div.loading_icon_detail").remove();$("div.media_inner_full_next").find("img.full-image, div.selected-img-info").css("visibility","visible");populateImageDetailsRes(n,$("div.media_inner_full_next"),1);rescaleDetailImages(n,$("div.media_inner_full_next"))}else{if(resultLoaderStat[category+"-metadata"].p){$("div.media_inner_full_next").remove()}else{if(resultLoaderStat[search_category+"-more-result"]&&triggerNextAjaxCall){lastElemId=$("li.active-thumb").attr("id");lastElemId=parseInt(lastElemId.replace(/^\D+/g,""),10);$("div.media_inner_full div.results_err_msg_mobile, div.media_inner_full_next div.results_err_msg_mobile").remove();var s="results_err_msg";if("ontouchstart" in window){s="results_err_msg_mobile"}if(jQuery("#"+search_category+"-lemmon-slider-wrapper").find("div."+s).length){fetchAfterFailedRequest("detail_view")}else{fetchResults(search_category,"detail_view")}}else{if(resultLoaderStat[search_category+"-more-result"]&&$("#"+search_category+"-lemmon-slider-wrapper").find("div.more_icon").length&&triggerNextAjaxCall===false){lastElemId=$("li.active-thumb").attr("id");lastElemId=parseInt(lastElemId.replace(/^\D+/g,""),10);jQuery(".more_icon").remove();removeAndAddLoaderContent(search_category);triggerNextAjaxCall=true;fetchResults(search_category,"detail_view")}}if(resultLoaderStat[search_category+"-more-result"]&&!$("div.media_inner_full_next").find("div.loading_icon_detail").length){var t=$("div.media_inner_full_next");t.find("img.full-image, div.selected-img-info").css("visibility","hidden");addLoadingIconInDetailView(t)}else{$("div.media_inner_full_next").remove()}}}}else{if($(this).hasClass("media_inner_full_curr")){$(this).removeClass("media_inner_full_curr").removeClass("current_detail").addClass("media_inner_full").addClass("current_detail")}else{if($(this).hasClass("media_inner_full_left")){$(this).removeClass("media_inner_full_left").removeClass("current_detail").addClass("media_inner_full_prev")}}}});$("#pics-lemmon-slider-ul li img").removeAttr("loaded");loadHighResolutionImage(e,$("div.media_inner_full"),1)}else{$(".media_inner_full_prev").stop().animate({left:-pageSize},200);$(".media_inner_full").stop().animate({left:0},200);$(".media_inner_full_next").stop().animate({left:pageSize},200)}}}function addLoadingIconInDetailView(b){var a=$("<div class='loading_icon_detail'><ul><li class='init_result_loader'><span></span></li></ul></div>");b.find("#image-close").after(a)}function setBackgroundProperties(){if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}$("#pics-multimedia-div").css("opacity","0");$("#wrapper").attr("style","background: #000 !important;")}function restoreBackgroundProperties(){if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}$("#pics-multimedia-div").css("opacity","");$("#wrapper").removeAttr("style")}function setDetailImageProperties(d){if($("li.active-thumb").length===0||search_category!=="pics"){return}if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}if(res_design===1){setBackgroundProperties()}if(d&&d==="resize"){getUpdatedOrientationProperties();return}var b=$(window).width();var c=("innerHeight" in window)?window.innerHeight:$(window).height();$("div.media_inner_full_prev, div.media_inner_full_next").css("display","none");var j=50,h=20;var a,g,i,f,e=0;i=b;i=c;clearInterval(a);clearTimeout(g);a=setInterval(function(){b=$(window).width();c=("innerHeight" in window)?window.innerHeight:$(window).height();if(!(b===i&&c===f)){clearInterval(a);getUpdatedOrientationProperties()}});g=setTimeout(function(){getUpdatedOrientationProperties()},h)}function getUpdatedOrientationProperties(){if(search_category!=="pics"){return}if(res_design!==1){return}if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}addNarrowClass();var d=$(window).width();if(d>narrowWinWidth){restoreBackgroundProperties();restoreDefaultImageBehavior(search_category);var g=document.getElementById("pics-full-display");g.removeEventListener("touchstart",detailTouchStartHandler);g.removeEventListener("touchmove",detailMoveHandler);return}else{setBackgroundProperties();if(res_design===1){$("div.detail_pane_all").addClass("detail_pane");$("div.detail_pane_all").each(function(){var m=$("<div id='narrow-detail-dropdown'>X</div>");if($(this).find("#narrow-detail-dropdown").length===0){$(this).find("#full-image-domain").after(m);$(this).find("div.selected-img-info").css("margin-top","")}});$("#pics-full-display").addClass("narrow-detail-view")}$("div.navbar, #footer, div.settings_cont").hide();$("#active-thum-pointer").css("display","none");var g=document.getElementById("pics-full-display");g.addEventListener("touchstart",detailTouchStartHandler);g.addEventListener("touchmove",detailMoveHandler)}var e=("innerHeight" in window)?window.innerHeight:$(window).height();$("div.media_inner_full_prev").css({left:-d,height:e});$("div.media_inner_full_next").css({left:d,height:e});var f=getDeviceOrientation();if(res_design===1&&f==="landscape"){$("div.media_inner_full").css("top","0px")}var i=$("li.active-thumb").attr("id");var b=$("li.active-thumb").find("img").attr("id");var a=getNeededImgId(i,"prev");var c=getNeededImgId(i,"next");var h=a[0];var j=a[1];var l=c[0];var k=c[1];$("div.media_inner_full").css({left:"0px",height:e});if($("#"+b).length){rescaleDetailImages(b,$("div.media_inner_full"))}if($("#"+j).length){rescaleDetailImages(j,$("div.media_inner_full_prev"))}if($("#"+k).length){rescaleDetailImages(k,$("div.media_inner_full_next"))}setTimeout(function(){$("div.media_inner_full_prev, div.media_inner_full_next").css("display","block");restoreBackgroundProperties()},100)}if("onorientationchange" in window){window.addEventListener("orientationchange",setDetailImageProperties)}if(res_design===1&&search_category==="pics"&&(MY_BROWSER!="IE"||(parseInt(MY_BROWSER_VERSION,10)!=8))){var initialWinWidth="innerWidth" in window?window.innerWidth:$(window).width();var finalWinWidth=initialWinWidth;$(window).on("resize",function(){var a=("innerWidth" in window)?window.innerWidth:$(window).width();if($("#pics-full-display").is(":visible")&&"ontouchstart" in window){setDetailImageProperties("resize")}else{if(!$("#pics-full-display").is(":visible")&&"ontouchstart" in window&&finalWinWidth!==a&&a>narrowWinWidth){$("div.media_inner_full").css({"margin-left":""})}else{if(!("ontouchstart" in window)&&finalWinWidth!==a){if(a<=narrowWinWidth){scaleImageToFitWindow()}else{restoreDefaultImageBehavior()}}}}finalWinWidth="innerWidth" in window?window.innerWidth:$(window).width();if(finalWinWidth<=narrowWinWidth&&initialWinWidth>narrowWinWidth){$("label.image-properties").hide()}initialWinWidth=finalWinWidth})}function detailTouchStartHandler(a){this.allowUp=(this.scrollTop>0);this.allowDown=(this.scrollTop<this.scrollHeight-this.clientHeight);this.slideBeginY=a.pageY}function detailMoveHandler(b){var a=(b.pageY>this.slideBeginY);var c=(b.pageY<this.slideBeginY);this.slideBeginY=b.pageY;if((a&&this.allowUp)||(c&&this.allowDown)){b.stopPropagation()}else{b.preventDefault()}}function populateResponsiveDetailContainers(){if((MY_BROWSER=="IE")&&(parseInt(MY_BROWSER_VERSION,10)==8)){return}var d="";var b="";var c="";var a=$(window).width();if(search_category==="pics"&&$("#"+search_category+"-full-display").is(":visible")&&a<=narrowWinWidth){if("ontouchstart" in window){$("div.media_inner_full div.results_err_msg_mobile, div.media_inner_full_next div.results_err_msg_mobile").remove();d=$("li.active-thumb").attr("id");d=parseInt(d.replace(/^\D+/g,""),10);if(d===lastElemId&&$("div.media_inner_full").find("div.loading_icon_detail").length===0){d=$("li.active-thumb").attr("id");b=getNeededImgId(d,"next");c=b[1];$("div.media_inner_full_next").find("div.loading_icon_detail").remove();$("div.media_inner_full_next").find("img.full-image, div.selected-img-info").css("visibility","visible");$("div.media_inner_full_next").find("#full-image-low-res").attr("src",$("#"+c).attr("src"));populateImageDetailsRes(c,$("div.media_inner_full_next"));rescaleDetailImages(c,$("div.media_inner_full_next"))}else{if(d===lastElemId){d=$("li.active-thumb").attr("id");b=getNeededImgId(d,"next");c=b[1];scaleImageToFitWindow(c,"detail_view")}}}else{if($("div.media_inner_full").find("div.loading_icon_detail").length){$("li.active-thumb").next("li").trigger("click");$("img.full-image, div.selected-img-info").css("visibility","visible");$("div.media_inner_full").find("div.loading_icon_detail").remove()}}}}function isHighResImageLoaded(){if(jQuery(".active-thumb img").attr("loaded")&&jQuery(".active-thumb img").attr("loaded")=="1"){return true}if(jQuery(".active-thumb img").attr("loaded")===undefined){return true}return false}var gridPagination=(function(e,b){var d="";function f(h){d=h}function g(){if(e("#"+d+"-full-display").is(":visible")){return}var j=a();if(!j.length){return false}if(!c(j)){for(var h=0;h<j.length;h++){j[h].hide()}}return true}function a(){var k=[];var j=e('[id ^= "'+d+'-li-container"]');var l=e('[id ^= "'+d+'-li-container"]').last();for(var h=j.length-1;h>=0;h--){if(e(j[h]).offset().top==l.offset().top){k.push(e(j[h]))}else{break}}if(j.length==k.length){return[]}return k}function c(k){var h=0;for(var j=0;j<k.length;j++){h+=k[j].outerWidth(true)}if(h*2<viewport().width){return false}return true}f(b);return{handleLastRow:g}})(jQuery,search_category);
/*------end------*/
/*------util_footer.js------*/
function bindReady(d){var f=false;function c(){if(f){return}f=true;d()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",c,false)}else{if(document.attachEvent){try{var a=window.frameElement!=null}catch(g){}if(document.documentElement.doScroll&&!a){function h(){if(f){return}try{document.documentElement.doScroll("left");c()}catch(i){setTimeout(h,10)}}h()}document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){c()}})}}if(window.addEventListener){window.addEventListener("load",c,false)}else{if(window.attachEvent){window.attachEvent("onload",c)}else{var b=window.onload;window.onload=function(){b&&b();c()}}}}var readyList=[];function onReady(a){function b(){for(var c=0;c<readyList.length;c++){readyList[c]()}}if(!readyList.length){bindReady(b)}readyList.push(a)}function addBannerClasses(){var a=("innerHeight" in window)?window.innerHeight:jQuery(window).height();if(a<720&&pbcrossbu!="undefine"&&pbcrossbu==1){jQuery(".sp-bannerOutline").addClass("mid-hight")}}$(window).resize(function(){addBannerClasses()});onReady(function(){addBannerClasses();updateThemeClassBackButton();if(typeof trigger_parameter_propagation=="function"){trigger_parameter_propagation()}if($("body").hasClass("settings-page")){highlightGenerateUrlSection()}});jQuery(window).on("hashchange",function(){if($("body").hasClass("settings-page")){highlightGenerateUrlSection()}});function urlToPost(a){var c=a.split("?");var d=c[0];var e=c[1].split("&");var b=jQuery(document.createElement("form")).attr("action",d).attr("method","post");jQuery.each(e,function(f,j){var h=j.split("=");var g=h[0],i=h[1];if(g=="query"){i=i.replace(/\+/g," ");i=decodeURIComponent(i)}jQuery(document.createElement("input")).attr("type","hidden").attr("name",g).attr("value",i).appendTo(b)});jQuery(b).css("display","none").appendTo("body").submit();return false}$(function(){var k=GetCookie("preferences");enableSlideDown=1;if(k&&k.match(/slide_down_headerEEE0N1N/)){enableSlideDown=0}if((typeof propagated_parms!="undefined"&&propagated_parms.slide_down_header==0)||(typeof preference_args!="undefined"&&preference_args.slide_down_header==0)){enableSlideDown=0}var i=60,h=0,d=0,f;var g=$(document.documentMode);if(g[0]==8){i=100}lastScrollType="";currentScrollType="";if(enableSlideDown==1){var c=$(".navbar"),b=$(".settings_cont"),a;$(window).on("scroll",function(){f=j();if(f>(i+1)){c.removeClass("nav-effect");currentsScrollTop=j(this);if(g[0]==8){if(h!=currentsScrollTop){if(h>currentsScrollTop){currentScrollType="upword"}else{currentScrollType="downword"}}}else{if(h>currentsScrollTop){currentScrollType="upword"}else{currentScrollType="downword"}}if(!a&&currentScrollType=="upword"&&currentScrollType!==lastScrollType){a=true;e(true)}else{if(currentScrollType=="downword"&&currentScrollType!=lastScrollType||currentScrollType=="downword"&f>i){if(a){a=false;e(false)}}}lastScrollType=currentScrollType}else{if(!a){a=true;e(true)}}h=f})}else{$(window).scroll(function(){if($(".settings_header").length){if($(window).scrollTop()>=i){$(".settings_header").addClass("fixed-header")}else{$(".settings_header").removeClass("fixed-header")}}})}function e(l){var m=$(".navbar"),n=$(".settings_cont");if(l){m.addClass("stick-header").stop(true,true).animate({top:"0px","margin-bottom":"0px"},400);if($(".settings_header").length){$(".settings_header").stop(true,true).animate({top:"0px","margin-bottom":"0px"},400)}n.removeClass("three_line_menu")}else{m.stop().animate({top:"-60px","margin-bottom":"-60px"},400);if($(".settings_header").length){$(".settings_header").stop().animate({top:"-60px","margin-bottom":"-60px"},400)}n.addClass("three_line_menu")}hideAutosuggest()}function j(){return $(window).scrollTop()||window.pageYOffset||document.documentElement.scrollTop}});$(function(){var c=$(document.documentMode);if(c[0]=="8"){$("#query_top").css("line-height","33px");$("#query_bottom").css("line-height","33px")}var b=$("#search .small-go-btn").width();$("#search .text-fields").css("padding-right",b+30);var a=$("#search_bottom .small-go-btn").width();$("#search_bottom .text-fields").css("padding-right",b+30);$("#query_top, #query_bottom").on("focus",function(){checkContent(this)});if($("#query_top").length&&$("#query_top").val().length>0){$(".clear_search").css("display","block")}if($("#query_bottom").length&&$("#query_bottom").val().length>0){$(".clear_search_bottom").css("display","block")}if($("#query_top").length){$("body").on("click touchend",function(g){var f=$(g.target).attr("class");var d=$(g.target).attr("id");if(f=="clear_search"){$("#query_top").attr("value","");$(".clear_search").css("display","none");$("#query_top").focus()}else{if(f=="clear_search_bottom"){$("#query_bottom").attr("value","");$(".clear_search_bottom").css("display","none");$("#query_bottom").focus()}else{if(f=="text-fields"){$(".clear_search").css("display","block");$("#query_top").focus()}}}if(d=="query_top"||f=="no_text"||f=="text-fields"||f=="no_text_small"){if($("html").hasClass("narrow")||$("html").hasClass("middle-screen")){$(".no_text_small").hide()}else{$(".no_text").hide()}$("#query_top").focus()}})}if($("#my-browser-name").length){$("#my-browser-name").html(MY_BROWSER)}});$(function(){hideElementsFromMobile()});$(function(){checkWidthAndResize();$(window).resize(checkWidthAndResize)});$(function(){var b=1;var d;var e;$("#hoverover").on("mouseenter",function(){clearTimeout(d);e=setTimeout(function(){$("#popup2").show()},500)});$("#popup2").on("mouseenter",function(){b=0;$("#popup2").show()});$("#popup2").on("mouseleave",function(){b=1;$("#popup2").hide()});var a=$("#hoverover");var c=$("#enhanced");$(document).on("click touchstart",function(g){var f=$(g.target).parent().parent();if(((!a.is($(f))&&!c.is($(f))))&&a.has(g.target).length===0&&c.has(g.target).length===0){if($("#popup2").css("display")=="block"){clearTimeout(e);$("#popup2").hide()}}else{clearTimeout(e);clearTimeout(d);$("#popup2").show()}});$("#hoverover").on("mouseleave",function(){d=setTimeout(function(){if(b==1){clearTimeout(e);$("#popup2").hide()}},400)})});$(window).load(function(){var d=getSelectedTheme();d=validateTheme(d);var a=getCookieListObj();var e="";if(a.design_type||jQuery('[name="air-new"]').length){e="new"}if(d=="daybreak"){d="day"}var c=getSideMenuClassNames();removeAClassFromAll($(".theme-box a"),"active");removeAClassFromAll($(".theme-box a"),"asian");var b=new RegExp(d,"i");if(e!=""){b=new RegExp(d+"-"+e,"i")}$(".theme-box a").each(function(){var f=$(this).attr("name");if(!f.match(/-retro/)&&f.match(b)){$(this).addClass(c)}});themeBoxClickHandler();selectedThemeHighlightHandler();languageBoxClickHandler()});$(window).load(function(){$(".ac_results").position($(".midline").position());$(window).resize(function(){setSidebarPosition(500);$(".ac_results").position($(".midline").position());$(".no_text_small").hide();$(".no_text").hide()})});jQuery(window).load(function(){var b="";var a=getUrlVars();if(jQuery("#query_top").length&&a.query!=undefined&&a.query!=""){$("#query_top").val(urldecode(a.query))}});$(window).load(function(){setTimeout(function(){$("#newLook_result").fadeIn(1000)},2000)});$(function(){var a=$("#slide-menu-pref-url").attr("href");if(a&&a.match(/&nj=1/)){a.replace("&nj=1","&nj=0");$("#slide-menu-pref-url").attr("href",a)}});onReady(function(){$("#query_top, #query_bottom").on("keyup keydown",function(a){if(typeof checkContent==="function"){checkContent(this)}})});function isOldDevice(){var c=false;if(typeof BrowserDetect!="undefined"){var a=BrowserDetect.OS;var b=(window.screen.height==(960/2));if(a==="iOS"&&((b&&BrowserDetect.version<=6)||BrowserDetect.version<=4)){c=true}}return c}var ia_original_options={};$(document).ready(function(){if($("body").hasClass("settings-page")&&(typeof IA!="undefined")&&IA.enable){var b=jQuery('[name="pref_language_ui"]');var a=jQuery('[name="pref_language"]');ia_original_options.wikipedia=$("#wikipedia_ia_check").is(":checked");ia_original_options.other=$("#other_ia_check").is(":checked");b.on("optionchanged",enable_disable_ia);a.on("optionchanged",enable_disable_ia);b.trigger("optionchanged");a.trigger("optionchanged")}});onReady(function(){var a=(function(g){var f=g("#video-banner");var c=g("#play-video-img");var b=g("#sm-video");var i={};i.player="html5";i.autostart=false;var d=function(j){if(typeof addVideo==="function"){var k=g(this).attr("data-attr");b.show();addVideo(j,k,"",i)}};var e=function(j){if(typeof jwplayer==="function"){j.stopPropagation();f.find("img").hide();jwplayer().play()}};var h=function(){if(f.length===0){return}f.on("click",d);f.trigger("click");c.on("click",e)};return{init:h}})(jQuery);a.init()});
/*------end------*/
/*------retina_responsive_footer.js------*/
$(function(){$("#menu-id").on("css",function(a){a.stopPropagation();checkCurrentProperty.apply(this,["visibility"])})});onReady(function(){more_action();addNarrowClass();setNarrowPopup();if((typeof DEVICE_TYPE!="undefined"&&DEVICE_TYPE!=""&&DEVICE_TYPE=="Mobile")||(getDeviceType()=="mobile")){$(".retro").hide()}else{$(".classic").hide()}$("a.menu_anchor, #menu-icon-id").on("click touchend",function(a){a.preventDefault();slide_menu_action(a);if(jQuery("html").hasClass("is-touch-device")){jQuery("body").addClass("transparent_bg");jQuery("#loadingId").css("display","block")}})});$(window).load(function(){$("#hoverover").on("click",function(b){b.stopPropagation();b.preventDefault();if(viewport().width<=middleWidth){$("#enhanced_by_google_popup .opener").trigger("click")}});$("#popup2 a").on("click",function(b){b.stopPropagation()});var a=setTimeout(function(){$("#sections img[data-lessLazy]").trigger("pageLoaded")},100)});$(function(){if($("html").hasClass("is-mobile-device")&&$("html").hasClass("homepage")&&isNarrowWindow()){$("html, body").animate({scrollTop:$("#search_form").offset().top},800)}});$(window).bind("orientationchange",function(a){if($("#query").is(":focus")&&$("html").hasClass("homepage")){$("html, body").animate({scrollTop:$("#search_form").offset().top},800)}});jQuery(document).ready(function(){$("#terms-conditions-link").on("click",function(a){jQuery("#terms-conditions-popup").addClass("wide_window_popup");$("body").css("overflow","hidden");$("#terms-conditions-popup .opener").trigger("click");blockPageScrolling("terms-conditions-popup")});$("#install_green_btn_id").on("click",function(a){jQuery("#chrome_install_steps_popup").addClass("wide_window_popup");$("body").css("overflow","hidden");$("#chrome_install_steps_popup .opener").trigger("click");blockPageScrolling("chrome_install_steps_popup")});adjustDescriptionMargin();$("body").on("click","#cookie_popup",function(a){$("#cookie_content_popup").addClass("wide_window_popup");$("body").css("overflow","hidden");$("#cookie_content_popup .opener").trigger("click");blockPageScrolling("cookie_content_popup ")});$("body").on("click","#server_select_link",function(a){$("#server_select_popup").addClass("wide_window_popup");$("body").css("overflow","hidden");$("#server_select_popup .opener").trigger("click");blockPageScrolling("server_select_popup")});$("body").on("click",".make_homepage_link",function(a){if(typeof elemToPopup!=="undefined"){elemToPopup.create("make_homepage_popup",jQuery("#home-popup-div"),function(b){$(b).removeAttr("style");$(b).find(".cross_icon").remove();$(b).removeAttr("id").attr("id","make_homepage_id");$(b).css("padding","20px");$(b).parent(".popup.retina").addClass("bordered")})}$("#make_homepage_popup #home-popup-div-inner").html($("#home-popup-div-inner").html());$("#make_homepage_popup").addClass("wide_window_popup");$("body").css("overflow","hidden");$("#make_homepage_popup .opener").trigger("click");blockPageScrolling("make_homepage_popup")});$("body").on("click","#install_plugin",function(a){if(MY_BROWSER==="Edge"){if(typeof elemToPopup!=="undefined"){elemToPopup.create("add_to_browser_custom_plugin_popup",jQuery("#add-to-popup-custom-plugin-div"),function(b){$(b).removeAttr("style");$(b).find(".cross_icon").remove();$(b).removeAttr("id").attr("id","add_to_browser_custom_plugin_id");$(b).css("padding","20px");$(b).parent(".popup.retina").addClass("bordered")})}$("#add_to_browser_custom_plugin_popup #add-to-popup-custom-plugin-div-inner").html($("#add-to-popup-custom-plugin-div-inner").html());$("#add_to_browser_custom_plugin_popup").addClass("wide_window_popup");$("body").css("overflow","hidden");$("#add_to_browser_custom_plugin_popup .opener").trigger("click");blockPageScrolling("add_to_browser_custom_plugin_popup")}});$("body").on("click","#url_gen_link",function(a){$("#url_generator_popup").addClass("wide_window_popup");$("body").css("overflow","hidden");$("#url_generator_popup .opener").trigger("click");blockPageScrolling("url_generator_popup")});$("body").on("click touchend touchmove",".cross_icon p.closeArea a, #loadingId",function(a){blockPageScrolling("url_generator_popup");blockPageScrolling("make_homepage_popup");blockPageScrolling("server_select_popup");blockPageScrolling("cookie_content_popup");blockPageScrolling("search_suggestions_popup");blockPageScrolling("terms_conditions_popup");blockPageScrolling("save_prompt_popup");if($("body").hasClass("transparent_bg")){a.stopPropagation();a.preventDefault();$("div.popup").hide();$("#loadingId ").hide();$("body").removeClass("transparent_bg");blockPageScrolling("popup");close_menu_items(a)}});map_events();if(typeof elemToPopup!=="undefined"){elemToPopup.create("proxy_more_popup",jQuery("#more_content_div"),function(a){$(a).removeAttr("style");$(a).find(".cross_icon").remove();$(a).removeAttr("id").attr("id","proxy_more_id");$(a).css("padding","20px");$(a).parent(".popup.retina").addClass("bordered")})}$("body").on("click","#more_text_link",function(a){$("#proxy_more_popup").addClass("wide_window_popup");jQuery("#more_content_div").hide();jQuery("#loadingId").hide();$("#proxy_more_popup .opener").trigger("click");blockPageScrolling("proxy_more_popup")});$("body").on("click",".cross_icon p.closeArea a, #loadingId",function(){jQuery("#more_content_div").hide();blockPageScrolling("more_content_div")});$("#query_top").on("touchstart",function(){$("#query_top").focus()})});$(function(){function a(){var b=$("html").hasClass("narrow")||$("html").hasClass("middle-screen");if(b){$("ul.show-narrow").show()}else{$("ul.show-narrow").hide()}}$(window).resize(a)});$(function(){function a(){if($("#web_filter_ddwn").length){if((viewport().width>middleWidth)||(typeof document.documentMode!=="undefined"&&document.documentMode===8)){$("#web_filter_ddwn").hide()}else{$("#web_filter_ddwn").css("display","inline-block")}}}a();$(window).resize(function(){if($("#bookmark_tip").length&&typeof blockPageScrolling==="function"){blockPageScrolling("bookmark_tip")}if($("#moreId").length&&$("#more_dwn").length&&$("#more_dwn").is(":visible")){adjustPopupPosition($("#more_dwn"))}a()});$("#privacy-link-mobile").on("click",function(b){if(!("ontouchstart" in window)){b.preventDefault()}})});var initCollapsable=(function(c,b,a,f){var h=c(b);var g=c(a);function e(i){i.on("click",function(j){if(i.attr("data-dirty")=="true"){return}i.attr("data-dirty","true");c.ajax({url:i.attr("data-counter"),type:"GET",success:function(k){}})})}function d(){if(c(".intro").length){c(".intro").show();e(c(".intro"));c(".pe_start").show()}var i={detailElement:".feature",icon:"a.btn-plus i.ico-plus",detailContentElement:".feature-foot"};c(a).on("click",".feature-content-actions .btn-plus",{extraData:i},j);var k={detailElement:".sub-list-view",icon:"a.btn-new-plus i.ico-plus",detailContentElement:".list-view-content"};c(a).on("click",".list-feature-items .btn-new-plus",{extraData:k},j);function j(p){p.preventDefault();var n=p.data.extraData;var o=c(this).closest(n.detailElement);var m=o.find(n.icon);var l="normal";if(typeof MY_BROWSER!=="undefined"&&MY_BROWSER==="IE"&&parseInt(MY_BROWSER_VERSION)===8){l="ie8"}o.toggleClass("expanded");if(o.hasClass("expanded")){m.addClass(l);setTimeout(function(){o.addClass("transit rotated")});o.find(n.detailContentElement).stop().slideDown(200)}else{o.removeClass("rotated");o.find(n.detailContentElement).stop().slideUp(200,function(){m.removeClass(l);o.removeClass("transit")})}}c(a).on("click",".feature-foot-actions .btn-close",function(l){l.preventDefault();$currentFeature=c(this).closest(".feature");$currentFeature.removeClass("expanded");$currentFeature.find(".feature-foot").slideUp()});c(a).on("click",".section-gift .btn-down",function(m){var l=c(this).attr("href");c("html, body").animate({scrollTop:c(l).offset().top},700);m.preventDefault()});c(a).on("click",".pe_start, .extended-scrollbtn-text",function(l){l.preventDefault();c("#sections").show().addClass("open");c("#sections img").trigger("load-section-images");c("html, body").animate({scrollTop:c("#sections").offset().top},700)})}return{run:d}})(jQuery,window,document);onReady(function(){$("#fb_li, #tw_li").hover(function(){$(this).find(".tip-content").css("display","inline-block");$(this).find(".tip-aroow").css("display","inline-block")},function(){$(this).find(".tip-content").hide();$(this).find(".tip-aroow").hide()});$.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()};function a(){var c=$(".popup-active .popup");var b="scrollable-popup";if(c.length===0||"ontouchstart" in window){return}setTimeout(function(){if(c.hasScrollBar()){c.addClass(b)}else{c.removeClass(b)}})}$(window).resize(a);$("div.pop_container").on("css",function(){a()});if($.fn.lazyload){$("#sections img[data-lessLazy]").lazyload({event:"pageLoaded"});$("#sections img").lazyload({event:"load-section-images"})}});
/*------end------*/
/*------result_inline_content_footer.js------*/
function change_link_to_post(){var b=document.getElementsByTagName("a");var a="POST";if(typeof document.blah1==="object"){a=document.blah1.method}if(a.toUpperCase()=="GET"){return}for(i=0;i<b.length;i++){if(b[i].className.match(/blockquote/)||b[i].className.match(/moreres2/)||b[i].className.match(/proxy_link/)||b[i].className.match(/no-date/)||b[i].className.match(/related_search/)||b[i].className.match(/tod/)||b[i].className.match(/video_family_filter/)||b[i].className.match(/video_sort_order/)||b[i].className.match(/sugg/)){b[i].onclick=function(){url_parts=this.href.split("?");parameters=url_parts[1];key_value_pairs=parameters.split("&");if(key_value_pairs.length>0){myform=document.createElement("form");myform.setAttribute("method","POST");myform.setAttribute("action",url_parts[0]);if(this.className.match(/proxy_link/)){myform.setAttribute("target","_blank")}for(j=0;j<key_value_pairs.length;j++){var c=key_value_pairs[j].split("=");form_elem=document.createElement("input");form_elem.setAttribute("name",c[0]);form_elem.setAttribute("type","hidden");c[1]=decodeURIComponent(c[1].replace(/\+/g," "));form_elem.setAttribute("value",c[1]);myform.appendChild(form_elem)}document.getElementById("hide_form").appendChild(myform);myform.submit();return false}else{return true}}}}}change_link_to_post();function change_related_search_link_to_post(a){var d=a.split("?");var b=d[1];var c=b.split("&");if(c.length>0){myform=document.createElement("form");myform.setAttribute("method","POST");myform.setAttribute("action",d[0]);for(j=0;j<c.length;j++){var e=c[j].split("=");form_elem=document.createElement("input");form_elem.setAttribute("name",e[0]);form_elem.setAttribute("type","hidden");e[1]=decodeURIComponent(e[1].replace(/\+/g," "));form_elem.setAttribute("value",e[1]);myform.appendChild(form_elem)}document.getElementById("hide_form").appendChild(myform);myform.submit();return false}else{return true}}function prepareSponsoredResults(){var a=$(".sponsored");a.find(".sptitle, .spurl").each(function(){var b=$(this);b.data("href",b.attr("href"));b.attr("href",b.data("nice-href"))});a.mousedown(function(c){var b=$(c.target).closest("a");if(b.has("sptitle")||b.has("spurl")){c.which==1||c.which==2||c.which==3?b.attr("href",b.data("href")):0}})}prepareSponsoredResults();function hoverResult(d,b){if(!isTouchSupported){var c=d.parents("li").attr("id");var a=document.querySelectorAll("#"+c+" h3 .result_url_heading")[0];if(a!=undefined){if(b==="hover-over"){a.style.textDecoration="underline"}else{a.style.textDecoration="none"}}}}$("li div p.desc, li div p span.url, li div p a.url,li div.official_block,li#official_site b").hover(function(){hoverResult($(this),"hover-over")},function(){hoverResult($(this),"hover-out")});var map_load=0;function loadmap(b){if(typeof config_data!=="undefined"){var a=config_data.map_base_url;a+="&zoom="+b;jQuery(".mapimg").attr("src",a)}}jQuery(document).ready(function(){if($("#map_slider").length){jQuery("#map_slider").slider({step:2,min:0,max:40,value:20,orientation:"vertical",slide:function(c,d){if(d.value<2||d.value>38){return false}var b=(d.value/2);loadmap(b)},change:function(c,d){if(d.value<2||d.value>38){return false}var b=(d.value/2);loadmap(b)}})}jQuery("#map_zoomin").click(function(){var b=jQuery("#map_slider").slider("option","value");if(b<38){jQuery("#map_slider").slider("value",b+2)}});jQuery("#map_zoomout").click(function(){var b=jQuery("#map_slider").slider("option","value");if(b>2){jQuery("#map_slider").slider("value",b-2)}});if(jQuery.browser.safari){jQuery("#map_slider a").css("margin-left","-2px")}var a=0;if(typeof config_data!=="undefined"&&config_data.rsd&&parseInt(config_data.rsd,10)===1){a=parseInt(config_data.rsd,10)}if(a===1&&(isMiddleWindow()||isTouchSupported)){jQuery("#mapd").off("click");jQuery("#mapd").on("click",function(b){b.stopPropagation();jQuery("#map_detail_popup .opener").trigger("click")})}else{jQuery("#map_box").off(startEvent);jQuery("#map_box").on(startEvent,"#mapd",function(b){b.stopPropagation();b.stopImmediatePropagation();retinaToolTip("map-detail",WIDTH,330,PADDING,8,FOLLOWMOUSE,false,FONTFACE,"Proxima Nova",FONTSIZE,"12px",FONTCOLOR,"#5e6c8c",MAINDIVCLASS,"nowrap-tooltip")})}});function set_footer_pos(){var a,d,c,b;d=$("#wrapper");b=$("#page-wrapper");c=(jQuery(".family_friendly_banner").length>0)?jQuery(".family_friendly_banner").outerHeight():0;a=$("#footer").height();d.css({"margin-bottom":-(a+c+1)});b.css({"padding-bottom":(a+c+1)})}jQuery(window).on("resize",function(b){var a=0;if(typeof config_data!=="undefined"&&config_data.rsd&&parseInt(config_data.rsd,10)===1){a=parseInt(config_data.rsd,10)}if(a===1){if(isMiddleWindow()||isTouchSupported){jQuery("#mapd").off("click");jQuery("#map_box").off(startEvent);jQuery("#mapd").on("click",function(c){c.stopPropagation();jQuery("#map_detail_popup .opener").trigger("click")})}else{jQuery("#map_box").off(startEvent);jQuery("#mapd").off("click");jQuery("#map_box").on(startEvent,"#mapd",function(c){c.stopPropagation();c.stopImmediatePropagation();retinaToolTip("map-detail",WIDTH,330,PADDING,8,FOLLOWMOUSE,false,FONTFACE,"Proxima Nova",FONTSIZE,"12px",FONTCOLOR,"#5e6c8c",MAINDIVCLASS,"nowrap-tooltip")})}}set_footer_pos()});(function(){if(jQuery("#map_box").length==0||typeof config_data==="undefined"){return}var a=config_data.map_base_url+"&zoom=10";var b=config_data.map_avt_img;jQuery(".mapimg").attr("src",a);jQuery(".mapimg").load(function(){jQuery(".maps").show();wrapTitleIfRightIaPresent();map_load++;if(map_load==1){load_img(b)}adjustMap()}).error(function(){$("#map_box").remove()})})();$(window).load(function(){set_footer_pos()});function display_invisible_results(){if(jQuery('.result[style^="visibility"]').length>0){jQuery(".result").css("visibility","visible")}}function additionalResultTooltip(){if(typeof BrowserDetect.device!=="undefined"&&BrowserDetect.device.type==="Desktop"){var a=["tooltip"];jQuery.each(a,function(c,b){jQuery("["+b+"]").on(startEvent,function(d){d.stopPropagation();d.stopImmediatePropagation();var e=$(this).attr(b);if(b==="tooltip"){if(e!==""&&typeof config_data!=="undefined"&&typeof config_data[e]!=undefined){retinaToolTip(config_data[e],PADDING,8,FONTFACE,"Proxima Nova",FONTSIZE,"12px",FONTCOLOR,"#5e6c8c",CENTERMOUSE,false)}}})})}}onReady(function(){display_invisible_results();additionalResultTooltip()});$(function(){setTimeout(function(){$("#fade_date_promo").fadeOut(1000)},15000);$("#promo_box").fadeIn(1000);$("#new_look").fadeIn(1000);$("#ix_promo_box").fadeIn(1000);setTimeout("fadeOutNewLook()",9000);if(abp){$(".abp").val("1");adjustUrlsForAbp("1")}else{$(".abp").val("-1");adjustUrlsForAbp("-1")}$("#search_engines ul li a").click(function(){var b=$(this).find("input");if($(b).attr("checked")){$(b).attr("checked",false);$(this).removeClass("selected")}else{$(b).attr("checked",true);$(this).addClass("selected")}return false});$("#vsearch_engines ul li a").click(function(){var b=$(this).find("input");$("#vsearch_engines input").attr("checked",false);$(b).attr("checked",true);$("#vsearch_engines a").removeClass("selected");$(this).addClass("selected");$("#results_header form").submit();return false});$("#detail").show();var a=true;$("#show_hide").click(function(b){a=!a;$("#side_bar").toggle();$("#results_content").toggleClass("hide_side_bar");$("#msg_div").css("display",(a)?"none":"block");setTimeout(function(){$("#msg_div").fadeOut(500)},5000);$("#msg_div").click(function(){$("#msg_div").fadeOut(500)});return false})});$(function(){if($.browser.mozilla){if(typeof config_data!=="undefined"){$("#page-wrapper").before('<div id="bookmark_tip"><p class="closeArea"><a id="closeAreaId" style="text-decoration : none;" onclick="changeLoadingIDDisplay()" href="#"></a></p><p id="bookmark_tip_text">'+config_data.bht+"</p></div>")}$("#wrapper").on("click","#closeAreaId",function(){changeLoadingIDDisplay();return false})}if($.browser.msie){$("#bookmark_tip").click(function(){$("#bookmark_tip").hide();blockPageScrolling("bookmark_tip");document.getElementById("loadingId").style.display="none";return false})}});$(function(){$("#loadingId").click(function(){var a,b;a=$("#bookmark_tip").css("display");b=$("#loadingId").css("display");if(a=="block"&&b=="block"){$("#bookmark_tip").hide();$("#loadingId").hide();blockPageScrolling("bookmark_tip")}});$("#wrapper").on("click","#closeAreaId",function(){changeLoadingIDDisplay();return false});$(document).keyup(function(a){if(a.keyCode==27){$("#bookmark_tip,#loadingId").hide();blockPageScrolling("bookmark_tip")}});$("#loadingId").doubletap(function(a){a.preventDefault()},function(a){$("#bookmark_tip,#loadingId").hide();blockPageScrolling("bookmark_tip")},250);$(".proxy").on("click",function(a){if(typeof a.stopPropagation!="undefined"){a.stopPropagation()}else{if(typeof a.cancelBubble!="undefined"){a.cancelBubble=true}}})});$(window).load(function(){var a="ontouchstart" in window;var b={};var c=false;if(typeof getCookieListObj==="function"){b=getCookieListObj()}if(b&&b.automatic_highlight){c=(b.automatic_highlight=="1")?false:true}else{if(b&&typeof b.disable_open_in_new_window!="undefined"){c=(b.disable_open_in_new_window=="0")?false:true}else{if(typeof preference_args!=="undefined"&&typeof preference_args.disable_open_in_new_window!="undefined"){c=(preference_args.disable_open_in_new_window=="0")?false:true}else{c=false;if(config_data!=="undefined"){c=(config_data.brand=="ixquick"||config_data.brand=="startpage")?false:true}}}}if(!a){$(".web_regular_results li div.result .clk").on("click",function(e){var d=$(this).parent().find("h3").find("a");var f=$(d).attr("href");$(d).triggerHandler("click");if(c===false){window.open(f,"_blank")}else{window.open(f,"_top")}});$(".web_regular_results li a").on("click",function(d){d.stopPropagation()})}});$(function(){if($(".language_others").length){var a=$(".language_others #bookmark_text");if(a.height()<15){a.css("top","15px")}}});$(function(){wrapLongTitles()});$(window).resize(function(){if($(window).width()>768){wrapLongTitles()}});$(function(){$("#pics, #video, #suggest").each(function(){var a=$(this).attr("href");if(a&&!(a.match(/nj=/))){a+="&nj=0";$(this).attr("href",a)}})});$(window).on("scroll",function(a){setSidebarPosition()});
/*------end------*/
/*------wz_tooltip.js------*/
var config=new Object();var tt_Debug=true;var tt_Enabled=true;var TagsToTip=true;config.Above=false;config.BgColor="#E4E7FF";config.BgImg="";config.BorderColor="#002299";config.BorderStyle="solid";config.BorderWidth=1;config.CenterMouse=false;config.ClickClose=false;config.CloseBtn=false;config.CloseBtnColors=["#990000","#FFFFFF","#DD3333","#FFFFFF"];config.CloseBtnText="&nbsp;X&nbsp;";config.CopyContent=true;config.Delay=400;config.Duration=0;config.FadeIn=0;config.FadeOut=0;config.FadeInterval=30;config.Fix=null;config.FollowMouse=true;config.FontColor="#000044";config.FontFace="Verdana,Geneva,sans-serif";config.FontSize="8pt";config.FontWeight="normal";config.Left=false;config.OffsetX=14;config.OffsetY=8;config.Opacity=100;config.Padding=3;config.Shadow=false;config.ShadowColor="#C0C0C0";config.ShadowWidth=5;config.Sticky=false;config.TextAlign="left";config.Title="";config.TitleAlign="left";config.TitleBgColor="";config.TitleFontColor="#ffffff";config.TitleFontFace="";config.TitleFontSize="";config.Width=0;function Tip(){tt_Tip(arguments,null)}function TagToTip(){if(TagsToTip){var a=tt_GetElt(arguments[0]);if(a){tt_Tip(arguments,a)}}}function UnTip(){tt_OpReHref();if(tt_aV[DURATION]<0&&(tt_iState&2)){tt_tDurt.Timer("tt_HideInit()",-tt_aV[DURATION],true)}else{if(!(tt_aV[STICKY]&&(tt_iState&2))){tt_HideInit()}}}var tt_aElt=new Array(10),tt_aV=new Array(),tt_sContent,tt_scrlX=0,tt_scrlY=0,tt_musX,tt_musY,tt_over,tt_x,tt_y,tt_w,tt_h;function tt_Extension(){tt_ExtCmdEnum();tt_aExt[tt_aExt.length]=this;return this}function tt_SetTipPos(b,d){var c=tt_aElt[0].style;tt_x=b;tt_y=d;c.left=b+"px";c.top=d+"px";if(tt_ie56){var a=tt_aElt[tt_aElt.length-1];if(a){a.style.left=c.left;a.style.top=c.top}}}function tt_Hide(){if(tt_db&&tt_iState){if(tt_iState&2){tt_aElt[0].style.visibility="hidden";tt_ExtCallFncs(0,"Hide")}tt_tShow.EndTimer();tt_tHide.EndTimer();tt_tDurt.EndTimer();tt_tFade.EndTimer();if(!tt_op&&!tt_ie){tt_tWaitMov.EndTimer();tt_bWait=false}if(tt_aV[CLICKCLOSE]){tt_RemEvtFnc(document,"mouseup",tt_HideInit)}tt_AddRemOutFnc(false);tt_ExtCallFncs(0,"Kill");if(tt_t2t&&!tt_aV[COPYCONTENT]){tt_t2t.style.display="none";tt_MovDomNode(tt_t2t,tt_aElt[6],tt_t2tDad)}tt_iState=0;tt_over=null;tt_ResetMainDiv();if(tt_aElt[tt_aElt.length-1]){tt_aElt[tt_aElt.length-1].style.display="none"}}}function tt_GetElt(a){return(document.getElementById?document.getElementById(a):document.all?document.all[a]:null)}function tt_GetDivW(a){return(a?(a.offsetWidth||a.style.pixelWidth||0):0)}function tt_GetDivH(a){return(a?(a.offsetHeight||a.style.pixelHeight||0):0)}function tt_GetScrollX(){return(window.pageXOffset||(tt_db?(tt_db.scrollLeft||0):0))}function tt_GetScrollY(){return(window.pageYOffset||(tt_db?(tt_db.scrollTop||0):0))}function tt_GetClientW(){return(document.body&&(typeof(document.body.clientWidth)!=tt_u)?document.body.clientWidth:(typeof(window.innerWidth)!=tt_u)?window.innerWidth:tt_db?(tt_db.clientWidth||0):0)}function tt_GetClientH(){return(document.body&&(typeof(document.body.clientHeight)!=tt_u)?document.body.clientHeight:(typeof(window.innerHeight)!=tt_u)?window.innerHeight:tt_db?(tt_db.clientHeight||0):0)}function tt_GetEvtX(a){return(a?((typeof(a.pageX)!=tt_u)?a.pageX:(a.clientX+tt_scrlX)):0)}function tt_GetEvtY(a){return(a?((typeof(a.pageY)!=tt_u)?a.pageY:(a.clientY+tt_scrlY)):0)}function tt_AddEvtFnc(b,a,c){if(b){if(b.addEventListener){b.addEventListener(a,c,false)}else{b.attachEvent("on"+a,c)}}}function tt_RemEvtFnc(b,a,c){if(b){if(b.removeEventListener){b.removeEventListener(a,c,false)}else{b.detachEvent("on"+a,c)}}}var tt_aExt=new Array(),tt_db,tt_op,tt_ie,tt_ie56,tt_bBoxOld,tt_body,tt_flagOpa,tt_maxPosX,tt_maxPosY,tt_iState=0,tt_opa,tt_bJmpVert,tt_t2t,tt_t2tDad,tt_elDeHref,tt_tShow=new Number(0),tt_tHide=new Number(0),tt_tDurt=new Number(0),tt_tFade=new Number(0),tt_tWaitMov=new Number(0),tt_bWait=false,tt_u="undefined";function tt_Init(){tt_MkCmdEnum();if(!tt_Browser()||!tt_MkMainDiv()){return}tt_IsW3cBox();tt_OpaSupport();tt_AddEvtFnc(document,"mousemove",tt_Move);if(TagsToTip||tt_Debug){tt_SetOnloadFnc()}tt_AddEvtFnc(window,"scroll",function(){tt_scrlX=tt_GetScrollX();tt_scrlY=tt_GetScrollY();if(tt_iState&&!(tt_aV[STICKY]&&(tt_iState&2))){tt_HideInit()}});tt_AddEvtFnc(window,"unload",tt_Hide);tt_Hide()}function tt_MkCmdEnum(){var n=0;for(var i in config){eval("window."+i.toString().toUpperCase()+" = "+n++)}tt_aV.length=n}function tt_Browser(){var n,nv,n6,w3c;n=navigator.userAgent.toLowerCase(),nv=navigator.appVersion;tt_op=(document.defaultView&&typeof(eval("window.opera"))!=tt_u);tt_ie=n.indexOf("msie")!=-1&&document.all&&!tt_op;if(tt_ie){var ieOld=(!document.compatMode||document.compatMode=="BackCompat");tt_db=!ieOld?document.documentElement:(document.body||null);if(tt_db){tt_ie56=parseFloat(nv.substring(nv.indexOf("MSIE")+5))>=5.5&&typeof document.body.style.maxHeight==tt_u}}else{tt_db=document.documentElement||document.body||(document.getElementsByTagName?document.getElementsByTagName("body")[0]:null);if(!tt_op){n6=document.defaultView&&typeof document.defaultView.getComputedStyle!=tt_u;w3c=!n6&&document.getElementById}}tt_body=(document.getElementsByTagName?document.getElementsByTagName("body")[0]:(document.body||null));if(tt_ie||n6||tt_op||w3c){if(tt_body&&tt_db){if(document.attachEvent||document.addEventListener){return true}}else{tt_Err("wz_tooltip.js must be included INSIDE the body section, immediately after the opening <body> tag.")}}tt_db=null;return false}function tt_MkMainDiv(){if(tt_body.insertAdjacentHTML){tt_body.insertAdjacentHTML("afterBegin",tt_MkMainDivHtm())}else{if(typeof tt_body.innerHTML!=tt_u&&document.createElement&&tt_body.appendChild){tt_body.appendChild(tt_MkMainDivDom())}}if(window.tt_GetMainDivRefs&&tt_GetMainDivRefs()){return true}tt_db=null;return false}function tt_MkMainDivHtm(){return('<div id="WzTtDiV"></div>'+(tt_ie56?('<iframe id="WzTtIfRm" src="javascript:false" scrolling="no" frameborder="0" style="filter:Alpha(opacity=0);position:absolute;top:0px;left:0px;display:none;"></iframe>'):""))}function tt_MkMainDivDom(){var a=document.createElement("div");if(a){a.id="WzTtDiV"}return a}function tt_GetMainDivRefs(){tt_aElt[0]=tt_GetElt("WzTtDiV");if(tt_ie56&&tt_aElt[0]){tt_aElt[tt_aElt.length-1]=tt_GetElt("WzTtIfRm");if(!tt_aElt[tt_aElt.length-1]){tt_aElt[0]=null}}if(tt_aElt[0]){var a=tt_aElt[0].style;a.visibility="hidden";a.position="absolute";a.overflow="hidden";return true}return false}function tt_ResetMainDiv(){var a=(window.screen&&screen.width)?screen.width:10000;tt_SetTipPos(-a,0);tt_aElt[0].innerHTML="";tt_aElt[0].style.width=(a-1)+"px"}function tt_IsW3cBox(){var a=tt_aElt[0].style;a.padding="10px";a.width="40px";tt_bBoxOld=(tt_GetDivW(tt_aElt[0])==40);a.padding="0px";tt_ResetMainDiv()}function tt_OpaSupport(){var a=tt_body.style;tt_flagOpa=(typeof(a.filter)!=tt_u)?1:(typeof(a.KhtmlOpacity)!=tt_u)?2:(typeof(a.KHTMLOpacity)!=tt_u)?3:(typeof(a.MozOpacity)!=tt_u)?4:(typeof(a.opacity)!=tt_u)?5:0}function tt_SetOnloadFnc(){tt_AddEvtFnc(document,"DOMContentLoaded",tt_HideSrcTags);tt_AddEvtFnc(window,"load",tt_HideSrcTags);if(tt_body.attachEvent){tt_body.attachEvent("onreadystatechange",function(){if(tt_body.readyState=="complete"){tt_HideSrcTags()}})}if(/WebKit|KHTML/i.test(navigator.userAgent)){var a=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(a);tt_HideSrcTags()}},10)}}function tt_HideSrcTags(){if(!window.tt_HideSrcTags||window.tt_HideSrcTags.done){return}window.tt_HideSrcTags.done=true;if(!tt_HideSrcTagsRecurs(tt_body)){tt_Err("To enable the capability to convert HTML elements to tooltips, you must set TagsToTip in the global tooltip configuration to true.")}}function tt_HideSrcTagsRecurs(c){var b,f,e;b=c.childNodes||c.children||null;for(var d=b?b.length:0;d;){--d;if(!tt_HideSrcTagsRecurs(b[d])){return false}f=b[d].getAttribute?b[d].getAttribute("onmouseover"):(typeof b[d].onmouseover=="function")?b[d].onmouseover:null;if(f){e=f.toString().match(/TagToTip\s*\(\s*'[^'.]+'\s*[\),]/);if(e&&e.length){if(!tt_HideSrcTag(e[0])){return false}}}}return true}function tt_HideSrcTag(b){var c,a;c=b.replace(/.+'([^'.]+)'.+/,"$1");a=tt_GetElt(c);if(a){if(tt_Debug&&!TagsToTip){return false}else{a.style.display="none"}}else{tt_Err("Invalid ID\n'"+c+"'\npassed to TagToTip(). There exists no HTML element with that ID.")}return true}function tt_Tip(a,b){if(!tt_db){return}if(tt_iState){tt_Hide()}if(!tt_Enabled){return}tt_t2t=b;if(!tt_ReadCmds(a)){return}tt_iState=1|4;tt_AdaptConfig1();tt_MkTipContent(a);tt_MkTipSubDivs();tt_FormatTip();tt_bJmpVert=false;tt_maxPosX=tt_GetClientW()+tt_scrlX-tt_w-1;tt_maxPosY=tt_GetClientH()+tt_scrlY-tt_h-1;tt_AdaptConfig2();tt_Move();tt_ShowInit()}function tt_ReadCmds(b){var d;d=0;for(var c in config){tt_aV[d++]=config[c]}if(b.length&1){for(d=b.length-1;d>0;d-=2){tt_aV[b[d-1]]=b[d]}return true}tt_Err("Incorrect call of Tip() or TagToTip().\nEach command must be followed by a value.");return false}function tt_AdaptConfig1(){tt_ExtCallFncs(0,"LoadConfig");if(!tt_aV[TITLEBGCOLOR].length){tt_aV[TITLEBGCOLOR]=tt_aV[BORDERCOLOR]}if(!tt_aV[TITLEFONTCOLOR].length){tt_aV[TITLEFONTCOLOR]=tt_aV[BGCOLOR]}if(!tt_aV[TITLEFONTFACE].length){tt_aV[TITLEFONTFACE]=tt_aV[FONTFACE]}if(!tt_aV[TITLEFONTSIZE].length){tt_aV[TITLEFONTSIZE]=tt_aV[FONTSIZE]}if(tt_aV[CLOSEBTN]){if(!tt_aV[CLOSEBTNCOLORS]){tt_aV[CLOSEBTNCOLORS]=new Array("","","","")}for(var a=4;a;){--a;if(!tt_aV[CLOSEBTNCOLORS][a].length){tt_aV[CLOSEBTNCOLORS][a]=(a&1)?tt_aV[TITLEFONTCOLOR]:tt_aV[TITLEBGCOLOR]}}if(!tt_aV[TITLE].length){tt_aV[TITLE]=" "}}if(tt_aV[OPACITY]==100&&typeof tt_aElt[0].style.MozOpacity!=tt_u&&!Array.every){tt_aV[OPACITY]=99}if(tt_aV[FADEIN]&&tt_flagOpa&&tt_aV[DELAY]>100){tt_aV[DELAY]=Math.max(tt_aV[DELAY]-tt_aV[FADEIN],100)}}function tt_AdaptConfig2(){if(tt_aV[CENTERMOUSE]){tt_aV[OFFSETX]-=((tt_w-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0))>>1)}}function tt_MkTipContent(b){if(tt_t2t){if(tt_aV[COPYCONTENT]){tt_sContent=tt_t2t.innerHTML}else{tt_sContent=""}}else{tt_sContent=b[0]}tt_ExtCallFncs(0,"CreateContentString")}function tt_MkTipSubDivs(){var b="position:relative;margin:0px;padding:0px;border-width:0px;left:0px;top:0px;line-height:normal;width:auto;",a=' cellspacing=0 cellpadding=0 border=0 style="'+b+'"><tbody style="'+b+'"><tr><td ';tt_aElt[0].innerHTML=(""+(tt_aV[TITLE].length?('<div id="WzTiTl" style="position:relative;z-index:1;"><table id="WzTiTlTb"'+a+'id="WzTiTlI" style="'+b+'">'+tt_aV[TITLE]+"</td>"+(tt_aV[CLOSEBTN]?('<td align="right" style="'+b+'text-align:right;"><span id="WzClOsE" style="padding-left:2px;padding-right:2px;cursor:'+(tt_ie?"hand":"pointer")+';" onmouseover="tt_OnCloseBtnOver(1)" onmouseout="tt_OnCloseBtnOver(0)" onclick="tt_HideInit()">'+tt_aV[CLOSEBTNTEXT]+"</span></td>"):"")+"</tr></tbody></table></div>"):"")+'<div id="WzBoDy" style="position:relative;z-index:0;"><table'+a+'id="WzBoDyI" style="'+b+'">'+tt_sContent+"</td></tr></tbody></table></div>"+(tt_aV[SHADOW]?('<div id="WzTtShDwR" style="position:absolute;overflow:hidden;"></div><div id="WzTtShDwB" style="position:relative;overflow:hidden;"></div>'):""));tt_GetSubDivRefs();if(tt_t2t&&!tt_aV[COPYCONTENT]){tt_t2tDad=tt_t2t.parentNode||tt_t2t.parentElement||tt_t2t.offsetParent||null;if(tt_t2tDad){tt_MovDomNode(tt_t2t,tt_t2tDad,tt_aElt[6]);tt_t2t.style.display="block"}}tt_ExtCallFncs(0,"SubDivsCreated")}function tt_GetSubDivRefs(){var b=new Array("WzTiTl","WzTiTlTb","WzTiTlI","WzClOsE","WzBoDy","WzBoDyI","WzTtShDwB","WzTtShDwR");for(var a=b.length;a;--a){tt_aElt[a]=tt_GetElt(b[a-1])}}function tt_FormatTip(){var d,b,a,c;if(tt_aV[TITLE].length){d=tt_aElt[1].style;d.background=tt_aV[TITLEBGCOLOR];d.paddingTop=(tt_aV[CLOSEBTN]?2:0)+"px";d.paddingBottom="1px";d.paddingLeft=d.paddingRight=tt_aV[PADDING]+"px";d=tt_aElt[3].style;d.color=tt_aV[TITLEFONTCOLOR];d.fontFamily=tt_aV[TITLEFONTFACE];d.fontSize=tt_aV[TITLEFONTSIZE];d.fontWeight="bold";d.textAlign=tt_aV[TITLEALIGN];if(tt_aElt[4]){d.paddingRight=(tt_aV[PADDING]<<1)+"px";d=tt_aElt[4].style;d.background=tt_aV[CLOSEBTNCOLORS][0];d.color=tt_aV[CLOSEBTNCOLORS][1];d.fontFamily=tt_aV[TITLEFONTFACE];d.fontSize=tt_aV[TITLEFONTSIZE];d.fontWeight="bold"}if(tt_aV[WIDTH]>0){tt_w=tt_aV[WIDTH]+((tt_aV[PADDING]+tt_aV[BORDERWIDTH])<<1)}else{tt_w=tt_GetDivW(tt_aElt[3])+tt_GetDivW(tt_aElt[4]);if(tt_aElt[4]){tt_w+=tt_aV[PADDING]}}a=-tt_aV[BORDERWIDTH]}else{tt_w=0;a=0}d=tt_aElt[5].style;d.top=a+"px";if(tt_aV[BORDERWIDTH]){d.borderColor=tt_aV[BORDERCOLOR];d.borderStyle=tt_aV[BORDERSTYLE];d.borderWidth=tt_aV[BORDERWIDTH]+"px"}if(tt_aV[BGCOLOR].length){d.background=tt_aV[BGCOLOR]}if(tt_aV[BGIMG].length){d.backgroundImage="url("+tt_aV[BGIMG]+")"}d.padding=tt_aV[PADDING]+"px";d.textAlign=tt_aV[TEXTALIGN];d=tt_aElt[6].style;d.color=tt_aV[FONTCOLOR];d.fontFamily=tt_aV[FONTFACE];d.fontSize=tt_aV[FONTSIZE];d.fontWeight=tt_aV[FONTWEIGHT];d.background="";d.textAlign=tt_aV[TEXTALIGN];if(tt_aV[WIDTH]>0){b=tt_aV[WIDTH]+((tt_aV[PADDING]+tt_aV[BORDERWIDTH])<<1)}else{b=tt_GetDivW(tt_aElt[6])+((tt_aV[PADDING]+tt_aV[BORDERWIDTH])<<1)}if(b>tt_w){tt_w=b}if(tt_aV[SHADOW]){tt_w+=tt_aV[SHADOWWIDTH];c=Math.floor((tt_aV[SHADOWWIDTH]*4)/3);d=tt_aElt[7].style;d.top=a+"px";d.left=c+"px";d.width=(tt_w-c-tt_aV[SHADOWWIDTH])+"px";d.height=tt_aV[SHADOWWIDTH]+"px";d.background=tt_aV[SHADOWCOLOR];d=tt_aElt[8].style;d.top=c+"px";d.left=(tt_w-tt_aV[SHADOWWIDTH])+"px";d.width=tt_aV[SHADOWWIDTH]+"px";d.background=tt_aV[SHADOWCOLOR]}else{c=0}tt_SetTipOpa(tt_aV[FADEIN]?0:tt_aV[OPACITY]);tt_FixSize(a,c)}function tt_FixSize(a,c){var e,d,b;tt_aElt[0].style.width=tt_w+"px";tt_aElt[0].style.pixelWidth=tt_w;d=tt_w-((tt_aV[SHADOW])?tt_aV[SHADOWWIDTH]:0);e=d;if(!tt_bBoxOld){e-=((tt_aV[PADDING]+tt_aV[BORDERWIDTH])<<1)}tt_aElt[5].style.width=e+"px";if(tt_aElt[1]){e=d-(tt_aV[PADDING]<<1);if(!tt_bBoxOld){d=e}tt_aElt[1].style.width=d+"px";tt_aElt[2].style.width=e+"px"}tt_h=tt_GetDivH(tt_aElt[0])+a;if(tt_aElt[8]){tt_aElt[8].style.height=(tt_h-c)+"px"}b=tt_aElt.length-1;if(tt_aElt[b]){tt_aElt[b].style.width=tt_w+"px";tt_aElt[b].style.height=tt_h+"px"}}function tt_DeAlt(c){var a;if(c.alt){c.alt=""}if(c.title){c.title=""}a=c.childNodes||c.children||null;if(a){for(var b=a.length;b;){tt_DeAlt(a[--b])}}}function tt_OpDeHref(a){if(!tt_op){return}if(tt_elDeHref){tt_OpReHref()}while(a){if(a.hasAttribute("href")){a.t_href=a.getAttribute("href");a.t_stats=window.status;a.removeAttribute("href");a.style.cursor="hand";tt_AddEvtFnc(a,"mousedown",tt_OpReHref);window.status=a.t_href;tt_elDeHref=a;break}a=a.parentElement}}function tt_ShowInit(){tt_tShow.Timer("tt_Show()",tt_aV[DELAY],true);if(tt_aV[CLICKCLOSE]){tt_AddEvtFnc(document,"mouseup",tt_HideInit)}}function tt_OverInit(a){tt_over=a.target||a.srcElement;tt_DeAlt(tt_over);tt_OpDeHref(tt_over);tt_AddRemOutFnc(true)}function tt_Show(){var a=tt_aElt[0].style;a.zIndex=Math.max((window.dd&&dd.z)?(dd.z+2):0,1010);a.zIndex=400000;if(tt_aV[STICKY]||!tt_aV[FOLLOWMOUSE]){tt_iState&=~4}if(tt_aV[DURATION]>0){tt_tDurt.Timer("tt_HideInit()",tt_aV[DURATION],true)}tt_ExtCallFncs(0,"Show");a.visibility="visible";tt_iState|=2;if(tt_aV[FADEIN]){tt_Fade(0,0,tt_aV[OPACITY],Math.round(tt_aV[FADEIN]/tt_aV[FADEINTERVAL]))}tt_ShowIfrm()}function tt_ShowIfrm(){if(tt_ie56){var a=tt_aElt[tt_aElt.length-1];if(a){var b=a.style;b.zIndex=tt_aElt[0].style.zIndex-1;b.display="block"}}}function tt_Move(a){a=window.event||a;if(a){tt_musX=tt_GetEvtX(a);tt_musY=tt_GetEvtY(a)}if(tt_iState){if(!tt_over&&a){tt_OverInit(a)}if(tt_iState&4){if(!tt_op&&!tt_ie){if(tt_bWait){return}tt_bWait=true;tt_tWaitMov.Timer("tt_bWait = false;",1,true)}if(tt_aV[FIX]){tt_iState&=~4;tt_SetTipPos(tt_aV[FIX][0],tt_aV[FIX][1])}else{if(!tt_ExtCallFncs(a,"MoveBefore")){tt_SetTipPos(tt_PosX(),tt_PosY())}}tt_ExtCallFncs([tt_musX,tt_musY],"MoveAfter")}}}function tt_PosX(){var a;a=tt_musX;if(tt_aV[LEFT]){a-=tt_w+tt_aV[OFFSETX]-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0)}else{a+=tt_aV[OFFSETX]}if(a>tt_maxPosX){a=tt_maxPosX}return((a<tt_scrlX)?tt_scrlX:a)}function tt_PosY(){var a;if(tt_aV[ABOVE]&&(!tt_bJmpVert||tt_CalcPosYAbove()>=tt_scrlY+16)){a=tt_DoPosYAbove()}else{if(!tt_aV[ABOVE]&&tt_bJmpVert&&tt_CalcPosYBelow()>tt_maxPosY-16){a=tt_DoPosYAbove()}else{a=tt_DoPosYBelow()}}if(a>tt_maxPosY){a=tt_DoPosYAbove()}if(a<tt_scrlY){a=tt_DoPosYBelow()}return a}function tt_DoPosYBelow(){tt_bJmpVert=tt_aV[ABOVE];return tt_CalcPosYBelow()}function tt_DoPosYAbove(){tt_bJmpVert=!tt_aV[ABOVE];return tt_CalcPosYAbove()}function tt_CalcPosYBelow(){return(tt_musY+tt_aV[OFFSETY])}function tt_CalcPosYAbove(){var a=tt_aV[OFFSETY]-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0);if(tt_aV[OFFSETY]>0&&a<=0){a=1}return(tt_musY-tt_h-a)}function tt_OnOut(){tt_AddRemOutFnc(false);if(!(tt_aV[STICKY]&&(tt_iState&2))){tt_HideInit()}}function tt_HideInit(){tt_ExtCallFncs(0,"HideInit");tt_iState&=~4;if(tt_flagOpa&&tt_aV[FADEOUT]){tt_tFade.EndTimer();if(tt_opa){var a=Math.round(tt_aV[FADEOUT]/(tt_aV[FADEINTERVAL]*(tt_aV[OPACITY]/tt_opa)));tt_Fade(tt_opa,tt_opa,0,a);return}}tt_tHide.Timer("tt_Hide();",1,false)}function tt_OpReHref(){if(tt_elDeHref){tt_elDeHref.setAttribute("href",tt_elDeHref.t_href);tt_RemEvtFnc(tt_elDeHref,"mousedown",tt_OpReHref);window.status=tt_elDeHref.t_stats;tt_elDeHref=null}}function tt_Fade(b,c,d,e){if(e){c+=Math.round((d-c)/e);if((d>b)?(c>=d):(c<=d)){c=d}else{tt_tFade.Timer("tt_Fade("+b+","+c+","+d+","+(e-1)+")",tt_aV[FADEINTERVAL],true)}}c?tt_SetTipOpa(c):tt_Hide()}function tt_SetTipOpa(a){tt_SetOpa(tt_aElt[5].style,a);if(tt_aElt[1]){tt_SetOpa(tt_aElt[1].style,a)}if(tt_aV[SHADOW]){a=Math.round(a*0.8);tt_SetOpa(tt_aElt[7].style,a);tt_SetOpa(tt_aElt[8].style,a)}}function tt_OnCloseBtnOver(b){var a=tt_aElt[4].style;b<<=1;a.background=tt_aV[CLOSEBTNCOLORS][b];a.color=tt_aV[CLOSEBTNCOLORS][b+1]}function tt_Int(a){var b;return(isNaN(b=parseInt(a))?0:b)}function tt_AddRemOutFnc(a){var b=a?tt_AddEvtFnc:tt_RemEvtFnc;if(a!=tt_AddRemOutFnc.bOn){b(tt_over,"mouseout",tt_OnOut);tt_AddRemOutFnc.bOn=a;if(!a){tt_OpReHref()}}}tt_AddRemOutFnc.bOn=false;Number.prototype.Timer=function(c,b,a){if(!this.value||a){this.value=window.setTimeout(c,b)}};Number.prototype.EndTimer=function(){if(this.value){window.clearTimeout(this.value);this.value=0}};function tt_SetOpa(b,a){tt_opa=a;if(tt_flagOpa==1){if(a<100){var c=b.visibility!="hidden";b.zoom="100%";if(!c){b.visibility="visible"}b.filter="alpha(opacity="+a+")";if(!c){b.visibility="hidden"}}else{b.filter=""}}else{a/=100;switch(tt_flagOpa){case 2:b.KhtmlOpacity=a;break;case 3:b.KHTMLOpacity=a;break;case 4:b.MozOpacity=a;break;case 5:b.opacity=a;break}}}function tt_MovDomNode(b,a,c){if(a){a.removeChild(b)}if(c){c.appendChild(b)}}function tt_Err(a){if(tt_Debug){alert("Tooltip Script Error Message:\n\n"+a)}}function tt_ExtCmdEnum(){var s;for(var i in config){s="window."+i.toString().toUpperCase();if(eval("typeof("+s+") == tt_u")){eval(s+" = "+tt_aV.length);tt_aV[tt_aV.length]=null}}}function tt_ExtCallFncs(c,d){var a=false;for(var e=tt_aExt.length;e;){--e;var f=tt_aExt[e]["On"+d];if(f&&f(c)){a=true}}return a}tt_Init();var isTouchSupported="ontouchstart" in window;var startEvent=isTouchSupported?"touchstart":"mouseover";var moveEvent=isTouchSupported?"touchmove":"mousemove";var endEvent=isTouchSupported?"touchend":"mouseleave";var clicked=isTouchSupported?"touchstart":"click";function calcTipXY(c,b){var h=14,f=14,g=0;var i=2;var l,d;var j,e;var m=c+h;var k=b+f;l=document.documentElement.clientWidth;d=document.documentElement.clientHeight;e=c-tt_GetScrollX();j=l-e;g=tt_w+2*i;if(g>l){m=c+h}else{if((j>g+h)&&!tt_aV[CENTERMOUSE]){m=e+h}else{if((j>(g/2))){m=e-g/2}else{m=e-g+j}}m=m+tt_GetScrollX()}k=b+f;var o=tt_h+2*i;var n=tt_GetScrollY();if(o>d-b-f+n){k=b-f-o}var a=new Array(m,k);return a}function OnHideInit(){}function OnMoveAfter(a){var b=calcTipXY(a[0],a[1]);tt_SetTipPos(b[0],b[1])}function makeToolTipResponsive(){tt_aExt=new Array();tt_Extension()}function retinaToolTip(e){var d=/(ipad|iphone|ipod)/i.test(navigator.userAgent);var b=[];for(var c=0;c<arguments.length;c++){b[c]=arguments[c]}if(d){tt_AddEvtFnc(window,startEvent,function(f){if(tt_iState&&!(tt_aV[STICKY]&&(tt_iState&2))){tt_HideInit()}})}if(TagsToTip){var a=tt_GetElt(arguments[0]);if(a){if(e.type!==startEvent){jQuery(e.currentTarget).on(startEvent,{params:b,ele:a},function(f){f.stopPropagation();tt_Tip(f.data.params,f.data.ele)})}tt_Tip(arguments,a)}else{if(e.type!==startEvent){jQuery(e.currentTarget).on(startEvent,{params:b},function(f){f.stopPropagation();tt_Tip(f.data.params,null)})}tt_Tip(arguments,null)}}makeToolTipResponsive()}if(typeof jQuery==="function"){jQuery(document).ready(function(){config.RetinaPopup=true;config.BodyClass="";config.MainDivClass="sb-tooltip";tt_MkCmdEnum()})}function OnLoadConfig(){if(tt_aV[RETINAPOPUP]){tt_aV[FOLLOWMOUSE]=false;tt_aV[FADEOUT]=tt_aV[FADEOUT]?tt_aV[FADEOUT]:500}}function OnSubDivsCreated(){if(tt_aV[RETINAPOPUP]){jQuery(tt_aElt[0]).on(startEvent,function(){tt_iState=0});jQuery(tt_aElt[0]).on(endEvent,function(){tt_iState=2;tt_HideInit()})}}function OnShow(){jQuery(tt_aElt[0]).attr("class",config.MainDivClass);jQuery(tt_aElt[5]).attr("class",config.BodyClass);jQuery(tt_aElt[0]).addClass(tt_aV[MAINDIVCLASS]);jQuery(tt_aElt[5]).addClass(tt_aV[BODYCLASS])}function OnHide(){if(tt_aV[RETINAPOPUP]){jQuery(tt_aElt[0]).off(startEvent);jQuery(tt_aElt[0]).off(endEvent)}jQuery(tt_aElt[0]).attr("class",config.MainDivClass);jQuery(tt_aElt[5]).attr("class",config.BodyClass);tt_aV[RETINAPOPUP]=config.RetinaPopup;tt_aV[MAINDIVCLASS]=config.MainDivClass;tt_aV[BODYCLASS]=config.BodyClass};
/*------end------*/
/*------results_filter.js------*/
var filterStatus=(function(c){var a="egif";var b=function(){if(typeof config_data!=="undefined"&&config_data[a]!=="undefined"){return parseInt(config_data[a])}return 0};return{areFiltersEnabled:b}})(jQuery);onReady(function(){var a=(function(w){var p=w("div.search-tools > ul > li > a");var o=w("div.search-tools > ul > li");var s=w("ul.dropdown.first-level li, ul.dropdown-second-level li");var c=w("#search_form");var u=w("#flimggo");var t=w("a.tools.links_n");var j=w("div.search-tools");var k=w("ul.dropdown.first-level");var H=w("ul.dropdown.second-level");var l=w("body");var z=w("ul.exactly input:text");var L=w("#reset");var x=w("#more_dwn > li > a.tools");var g=w("#head_left > a.tools");var B=null;var n=function(M){M.preventDefault();M.stopPropagation();B=w(this);C();o.not(B.parent("li")).find("ul").hide();B.parent("li").find(k).toggle();H.hide()};var C=function(){var M="";if(typeof B.attr("data-name")!=="undefined"){M=B.attr("data-name")}if(M==="clear"){m()}};var m=function(M){B=w(this);if(B.attr("id")=="reset"){M.stopPropagation();M.preventDefault()}h();r();y()};var y=function(){c.submit()};var r=function(){var O=v();var N=w();var M=0;for(M;M<O.length;M++){N=w(O[M]);N.val("")}};var v=function(){var M=config_data.flcat;var N=c.find("input[name^='"+M+"']");return N};var D=function(){if(!e()){return}var M=B.find("ul.second-level");H.not(M).hide();M.toggle()};var e=function(){var N=B.find("ul.second-level");var M=N.length;return M};var J=function(){return B.closest("ul").hasClass("exactly")};var f=function(M){B=w(this);M.preventDefault();M.stopPropagation();if(K()&&!e()){return}F()};var F=function(){if(J()){return}if(e()){D();return}var M=d();var O=M[0];var N=M[1];if(typeof O!=="undefined"&&typeof N!=="undefined"){i(O,N);y()}};var d=function(){var M=B.find("> a");var O=M.attr("data-attr");var N=B.closest("ul.first-level").attr("data-name");return[N,O]};var i=function(O,M){var P=w("input[name="+O+"]");var N="";if(!P.length){N="<input type='hidden' name='"+O+"' value='"+M+"'>";c.find("div.text-fields div").append(N)}else{P.val(M)}};var K=function(){return B.hasClass("selected")||B.children("a").hasClass("active")};var A=function(N){var O={left:37,right:39,esc:27,enter:13,tab:9};if(N.which===O.enter){var M=w(this);I(N,M)}};var I=function(S,V){if(typeof V!=="undefined"){B=V}else{B=w(this)}var P=B.closest("ul").find("li input:button").attr("data-attr");var T=B.closest("ul").find("li input:text");var R,N,U;var Q=w();var W={};for(R=0;R<T.length;R++){Q=w(T[R]);N=Q.val();U=Q.attr("data-attr");W[U]=N;if(N){U=U.replace("VALUE",N);Q.attr("data-attr",U);P+=","+U}}var M=P;var O=B.closest("ul.first-level").attr("data-name");i(O,M);if(q(T)){y()}};var q=function(N){var M;var O=w();for(M=0;M<N.length;M++){O=w(N[M]);if(!O.val()){return false}}return true};var E=function(M){M.preventDefault();M.stopPropagation();B=w(this);if(j.filter(":animated").length>0){return false}var N=220;j.slideToggle(N,function(){if(viewport().width>768&&w("#pics-full-display").is(":visible")){setDetailViewPosition("pics");setGrayPointerPosition()}});j.toggleClass("tools-visible");if(viewport().width>768){B.toggleClass("active");h()}else{g.toggleClass("active");h();B.closest("ul.popup_action").hide()}};var h=function(){k.hide();H.hide()};var G=function(){if(!filterStatus.areFiltersEnabled()){return}p.on("click",n);s.on("click",f);u.on("click",I);t.on("click",E);l.on("click",h);L.on("click",m);z.on("keydown",A);x.removeClass("active").addClass("tools-narrow");g.addClass("tools-large")};return{init:G}})(jQuery);a.init();var b=(function(h){var i=h("#more_dwn");var k=h("#moreId");var e=h("#more_dwn a.tools");var m=h("#web");var j=true;var c=0;var l=null;var g=function(o){if(typeof isElementInViewport==="function"){return isElementInViewport(o)}return false};var d=function(){return k.offset().top===m.offset().top};var f=function(r){var q="outofview";var p="level-break";var o=h(window).width();j=g(r);if((c>0&&o<=c)||j===false){if(!c){c=o}if(d()){r.addClass(q);r.removeClass(p)}else{r.removeClass(q);r.addClass(p)}}else{r.removeClass(q);r.removeClass(p)}return};var n=function(){if(!filterStatus.areFiltersEnabled()){return}k.on("click",function(){f(i)});h(window).resize(function(){f(i)})};n()})(jQuery)});
/*------end------*/
